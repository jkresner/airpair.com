<header>
  <ol class="entry-meta breadcrumb">
    <li><a href="/posts" target="_self">Posts</a></li>
    <li class="current">My Posts</li>
  </ol>
</header>

<p class="onmob">My posts is not supported on mobile.
  <br />Return to <a href="/posts" target="_self">All posts</a>?</p>

<section ng-if="forked" class="notifications">
  <div id="forked">
    <h1><img ng-src="/static/img/css/airpair-author.png" /> Mother Forker!</h1>
    <h3><b><a href="https://github.com/{{session.social.gh.username}}/{{forked.slug}}" target="_blank">{{ forked.title }}</a></b> has been forked to your github account.</h3>
    <p>Make edits like you would normal code, then submit a pull request to get your contributions incorpated.</p>
    <p></p>
  </div>
</section>

<section ng-if="submitted" class="notifications">
  <div id="postsubmitted">
    <h1><img ng-src="/static/img/css/airpair-author.png" /> Post submitted!</h1>
    <h3>The repo <b><a href="https://github.com/airpair/{{submitted.slug}}" target="_blank">{{ submitted.slug }}</a></b> has been created. From this point on, all edits will be tracked in git. You can also accept pull requests from community reviewers.</h3>
    <p>When you have 5 or more reviews with a rating of 3.5/5 or higher, you can publish your post.</p>
  </div>
</section>


<section id="myposts">

  <section ng-if="contributions" id="contributions" class="nomob">

    <h3 class="underline">My contributions
      <a href="/posts/new" class="btn btn-sm">Start a post</a>
    </h3>

    <p ng-if="contributions == 0">
      <img src="/static/img/pages/posts/social-authoring.png" />
    </p>


    <div ng-if="contributions.length > 0" class="myposts">
      <table class="table table-striped">
        <tbody>
          <tr ng-repeat="p in contributions">
            <td class="contributors">
              <img ng-src="{{p.by.avatar}}?s=30" class="user">
              <div class="forks" ng-if="p.forkers.length > 0">
                +{{p.forkers.length}} fork<span ng-if="p.forkers.length > 1">s</span>
              </div>
            </td>
            <td class="title">
              {{ p.title }}
            </td>
            <td class="status">
              <label class="words">{{p.wordcount}} words</label>
              <span ng-if="!p.submitted && !p.published">
                <a href="/posts/edit/{{p._id}}" target="_self">draft
                </a>
              </span>
              <span ng-if="p.submitted && !p.published">
                <a href="/posts/review/{{p._id}}" target="_target">in review</a>
              </span>
              <span ng-if="p.published">
                <a href="{{p.url}}" target="_target">published</a>
              </span>
              <div ng-if="p.submitted && p.reviews.length > 0">
                <stars val="p.stars.avg"></stars>
                <label>by {{p.reviews.length}}<span ng-if="p.reviews.length > 1">s</span></label>
              </div>
            </td>
            <td class="edit">

              <a ng-if="p.mine && p.github" href="https://github.com/airpair/{{p.slug}}" target="_blank" class="gh-white"></a>

              <a ng-if="p.forked" href="https://github.com/{{session.social.gh.username}}/{{p.slug}}" target="_blank" class="gh-white fork"></a>

              <a ng-if="p.mine && !p.submitted && !p.published" ng-click="delete(p._id)" title="delete" class="delete">x</a>

              <!-- <a ng-if="!p.mine" ng-click="deleteFork(p._id)" title="delete fork" class="delete">x</a> -->

              <a ng-if="p.submitted" href="/posts/contributors/{{p._id}}" class="contribitors"></a>

              <a href="/posts/edit/{{p._id}}" title="edit" class="edit"></a>

            </td>
            <td class="tip"><post-step-helper post="p"></post-step-helper></td>
          </tr>
        </tbody>
      </table>
    </div>

  </section>



  <section ng-if="!session._id" id="recent" class="postTiles">
    <h3 class="underline">Newest published posts <a href="/posts" target="_self" class="btn btn-sm btn-inverse">See all</a></h3>
    <post-tile post="p" ng-repeat="p in recent"></post-tile>
  </section>



  <section ng-if="session._id" id="inreview" class="postTiles inreview">
    <h3 class="underline">New posts in review <a href="/posts/in-community-review" target="_self" class="btn btn-sm btn-inverse">See all</a></h3>
    <post-tile post="p" ng-repeat="p in recent"></post-tile>
  </section>


</section>


