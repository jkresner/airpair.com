<header>
  <ol class="entry-meta breadcrumb">
    <li><a href="/posts" target="_self">Posts</a></li>
    <li class="current">My Contributions</li>
  </ol>
</header>

<p class="onmob">My posts is not supported on mobile.
  <br />Return to <a href="/posts" target="_self">All posts</a>?</p>



<section id="myposts">

  <section ng-if="forked" class="notifications">
    <div id="forked">
      <h1><img ng-src="/static/img/css/airpair-author.png" /> Mother Forker!</h1>
      <h3><b><a href="https://github.com/{{session.social.gh.username}}/{{forked.slug}}" target="_blank">{{ forked.title }}</a></b> has been forked to your github account.</h3>
      <p>Make edits like you would normal code, then submit a pull request to get your contributions incorpated.</p>
    </div>
  </section>

  <section ng-if="submitted" class="notifications">
    <div id="postsubmitted">
      <h2>{{submitted.title}}</h2>
      <h3>is submitted for <a href="/posts/in-community-review">community review</a>  and stored on GitHub!</h3>
      <img src="/static/img/pages/posts/authoring-flow-review.png" />
      <p>You can continue to <b>edit</b> via the AirPair editor. All edits are now tracked by git and you can <b>collaborate</b> with contributors using forks & pull requests. With 3 reviews of 3.5 stars or higher, you'll be able to publish your post.</p>
    </div>
  </section>

  <section ng-if="contributions" id="contributions" class="nomob">

    <h3 class="underline">Contributions
      <ul ng-if="contributions.length > 5">
        <li><button ng-click="filterMyPosts('all')" ng-disabled="filter == 'all'">All posts</button></li>
        <li><button ng-click="filterMyPosts('mine')" ng-disabled="filter == 'mine'">My posts</button></li>
        <li><button ng-click="filterMyPosts('forks')" ng-disabled="filter == 'forks'">By others</button></li>
      </ul>

      <a href="/posts/new" class="btn btn-sm">Start a post</a>
    </h3>

    <p ng-if="contributions == 0">
      <img src="/static/img/pages/posts/social-authoring.png" />
    </p>


    <div ng-if="contributions.length > 0" class="myposts">
      <table class="table table-striped">
        <tbody>
          <tr ng-repeat="p in contributions">
            <td class="contributors">
              <img ng-src="{{p.by.avatar}}?s=32" class="user">
            </td>
            <td class="forks">
              <em ng-if="p.forkers.length > 0">
                <a href="/posts/contributors/{{p._id}}">+{{p.forkers.length}}</a></em>
              <div ng-if="p.forkers.length > 0">
                fork<span ng-if="p.forkers.length > 1">s</span>
              </div>
            </td>
            <td class="title">
              {{ p.title }}
            </td>
            <td class="status">
              <span ng-if="!p.submitted && !p.published">
                <a href="/posts/edit/{{p._id}}" target="_self">draft
                </a>
              </span>
              <span ng-if="p.submitted && !p.published">
                <a href="/posts/review/{{p._id}}" target="_target">in review</a>
              </span>
              <span ng-if="p.published">
                <a href="{{p.url}}" target="_target">published</a>
              </span>
              <label class="words">{{p.wordcount}} words</label>
              <div ng-if="p.submitted && p.reviews.length > 0">
                <a href="/posts/contributors/{{p._id}}"><stars val="p.stars.avg"></stars><em>({{p.reviews.length}})</em></a>
              </div>
            </td>
            <td class="edit">

              <a href="/posts/edit/{{p._id}}" title="edit" class="edit"></a>

              <a ng-if="p.mine && p.submitted" href="https://github.com/airpair/{{p.slug}}/blob/edit/post.md" target="_blank" class="gh-white"></a>

              <a ng-if="p.forked" href="https://github.com/{{session.social.gh.username}}/{{p.slug}}/blob/edit/post.md" target="_blank" class="gh-white fork"></a>

              <a ng-if="p.mine && !p.submitted && !p.published" ng-click="delete(p._id)" title="delete" class="delete">x</a>

              <!-- <a ng-if="!p.mine" ng-click="deleteFork(p._id)" title="delete fork" class="delete">x</a> -->

              <a ng-if="p.submitted" href="/posts/contributors/{{p._id}}" class="contribitors"></a>


            </td>
            <td class="tip"><post-step-helper post="p"></post-step-helper></td>
          </tr>
        </tbody>
      </table>
    </div>

  </section>



  <section ng-if="!session._id && recent" id="recent" class="postTiles">
    <h3 class="underline">Newest published posts <a href="/posts" target="_self" class="btn btn-sm btn-inverse">See all</a></h3>
    <post-tile post="p" ng-repeat="p in recent"></post-tile>
  </section>



  <section ng-if="session._id && recent" id="inreview" class="postTiles inreview">
    <h3 class="underline">Newest posts in review <a href="/posts/in-community-review" target="_self" class="btn btn-sm btn-inverse">See all</a></h3>
    <post-tile post="p" ng-repeat="p in recent"></post-tile>
  </section>


</section>


