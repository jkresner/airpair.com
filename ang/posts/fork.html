<header>
  <ol class="entry-meta breadcrumb">
    <li><a href="/posts">Posts</a></li>
    <li>{{post.title}}</li>
    <li class="current">Fork</li>
  </ol>
</header>

<section id="postfork">

  <section id="recent">
    <div class="posts recent">
      <ap-post-list-item post="p" ng-repeat="p in tofork"></ap-post-list-item>
    </div>
  </section>

  <section ng-if="isOwner" id="authorcantfork">
    <h3 class="underline">Can't fork your own post
      <a href="{{tofork[0].meta.canonical}}" class="btn btn-sm" target="_self">Back to your post</a>
    </h3>

    <p>If you want to make changes to your post,
      <a ng-href="/posts/edit/{{tofork[0]._id}}" target="_self">edit it with the AirPair editor</a>.</p>
  </section>

  <section ng-if="!isOwner" id="forkinfo">

    <h2>This post will be forked to your Github account*</h2>

    <h3>Why does AirPair use Github?</h3>

    <p>Posts created on AirPair are backed by github repositories. This
    enables community members to work together leveraging all the great Github tools
    you know and love like commit logs, pull requests, issues, comments and more.
    These features make writing great content easier and a more social experience.</p>

    <img src="/static/img/pages/posts/post-authoring-flow.png" />

    <section class="notice" ng-if="!repoAuthorized">
      <h3>We need to authenticate with your Github account.</h3>
      <p>You will be redirected to a github login page requesting repository permissions, so we can fork this post to your account.</p>
    </section>

    <hr />

    <a ng-if="!repoAuthorized" ng-href="/auth/github?returnTo=/posts/me?fork={{post._id}}" class="btn" target="_self">Connect Github Account & Fork Repository</a>
    <a ng-if="repoAuthorized" ng-href="/posts/me?fork={{post._id}}" class="btn" target="_self">Fork repository</a>
    <p>* Your forked repo will be private, but will not count against your private repo allotment on Github</p>
  </section>

</section>
