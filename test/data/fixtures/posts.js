module.exports = {


  toc1: `## Welcome to toc1 h2

Now is a good time.

### Here's first sub h3 ###

And more <sup>[nodejs.org](http://www.nodejs.org/)</sup>

#### Let's hope h4 doesnt render

###Second h3

\`\`\`
### Inside code h2 don't count
<sup>sup 2 inside codeblock counts</sup>
\`\`\`

<h2>Html h2 doesn't count either</h2>

## Second H2

Bah bhasdh <sup>3rd
 ref</sup>
\`\`\`lang=js
### Code h2 headings don't count
\`\`\`

## Third h2

h1 underline sould be ignored
==

h2 underline should pickup
-----------------------------

### Third h3

<sup>1</sup> done
`,

  higherOrder: {
    "_id" : ObjectId("55c02b22d131551100f1f0da"),
    "title" : "Mastering ES6 higher-order functions for Arrays",
    "md" : "Higher-order functions are beautifully concise yet expressive when dealing with data. Elevate your functional programming skills by learning ES6 higher-order functions for Arrays!",
    "log": {
      "last" : {
        "by" : { "name" : "Tiago Romero Garcia", "_id" : ObjectId("538bae591c67d1a4859d3381") },
        "utc" : ISODate("2015-09-15T18:39:06.633Z"),
        "action" : "publish"
      },
      history: [
        {
          "action" : "publish",
          "utc" : ISODate("2015-09-15T18:39:06.632Z"),
          "by" : { "_id" : ObjectId("538bae591c67d1a4859d3381"), "name" : "Tiago Romero Garcia" },
          "commit" : "60f98aa4989c23b4fe06f9d711e77d16ca2f296b",
          "_id" : ObjectId("55f865ca272fbe11004303d7")
        }
      ]
    },
    "tags" : [
      { "_id" : ObjectId("514825fa2a26ea020000001f"), "sort" : "0" },
      { "_id" : ObjectId("5181d0a966a6f999a465ecca"), "sort" : "1" },
      { "_id" : ObjectId("5181d0a966a6f999a465ec0a"), "sort" : "2" }
    ],
    "forkers" : [
        { "userId" : ObjectId("54f711888438550c00e98aa0"), "_id" : ObjectId("55ddc500f8279f110030d88d") },
        { "userId" : ObjectId("55e90102d2b5001100b0fc79"), "_id" : ObjectId("55e90c2ad2b5001100b0fe35") }
    ],
    "reviews" : [
        {
          "by" : ObjectId("5524440217321011003de445"),
          "_id" : ObjectId("55dcb002c184971100440bbe"),
          "votes" : [
            { "_id" : ObjectId("55dcb057c184971100440bd5"), "val" : 1, "by": ObjectId("538bae591c67d1a4859d3381") }
          ],
          "replies" : [
            { "by" : ObjectId("538bae591c67d1a4859d3381"), "said" : "Thanks Julien for feedback and rating!", "_id" : ObjectId("55dcb061c184971100440bd7") }
          ],
          "val" : "4",
          "said" : "Good stuff!"
        },
        {
          "_id" : ObjectId("55ea6e2a244a461100582db1"),
          "by" : ObjectId("55ea653e244a461100582ccc"),
          "val" : 5,
          "said": "It's useful and well-timed post.",
          "votes" : [
              { "_id" : ObjectId("55ed29a7dd5ac311003773c7"), "val" : 1, "by" : ObjectId("538bae591c67d1a4859d3381") }
          ],
          "replies" : [
            { "by" : ObjectId("538bae591c67d1a4859d3381"), "said" : "Thanks Alex!!", "_id" : ObjectId("55ed29b0dd5ac311003773cb") }
          ]
        },
        {
          "_id" : ObjectId("55efa1326882141100f368f5"),
          "by" : ObjectId("5175efbfa3802cc4d5a5e6ed"),
          "updated" : ISODate("2015-09-15T17:53:12.664Z"),
          "val": 4,
          "said": "(1) Nice ending to a great ready :p"
        }
    ],
    history: {
      "updated" : ISODate("2015-09-15T18:39:06.633Z"),
      "created" : ISODate("2015-08-04T03:01:54.730Z"),
      "submitted" : ISODate("2015-08-25T17:31:22.008Z"),
      "published" : ISODate("2015-09-15T18:39:06.633Z"),
      "live": {
        "commit" : "60f98aa4989c23b4fe06f9d711e77d16ca2f296b",
        "updated" : ISODate("2015-09-15T18:39:06.633Z"),
        "publishedBy" : ObjectId("538bae591c67d1a4859d3381")
      }
    },
    "by" : {
        "linked" : {
            "gh" : "tiagorg",
            "so" : "http://stackoverflow.com/users/4438850/tiago-garcia",
            "bb" : "tiagorg",
            "in" : "ivQASjTDc7",
            "tw" : "tiagooo_romero"
        },
        "avatar" : "//0.gravatar.com/avatar/5cac784a074b86d771fe768274f6860c",
        "bio" : "Technical Manager at @AvenueCode and Technical Leader at @Macys, heavily interested in cutting-edge front-end technologies. http://tiagorg.com",
        "name" : "Tiago Romero Garcia",
        "_id" : ObjectId("538bae591c67d1a4859d3381")
    },
    "assetUrl" : "https://cloud.githubusercontent.com/assets/764487/9474195/82d6a242-4b35-11e5-87a0-43561850b53a.jpg",
    "htmlHead" : {
      "ogUrl" : "https://www.airpair.com/javascript/posts/mastering-es6-higher-order-functions-for-arrays",
      "ogType" : "article",
      "ogTitle" : "Mastering ES6 higher-order functions for Arrays",
      "title" : "Mastering ES6 higher-order functions for Arrays",
      "description" : "Higher-order functions are beautifully concise yet expressive when dealing with data. Elevate your functional programming skills by learning ES6 higher-order functions for Arrays!",
      "ogDescription" : "Higher-order functions are beautifully concise yet expressive when dealing with data. Elevate your functional programming skills by learning ES6 higher-order functions for Arrays!",
      "canonical" : "https://www.airpair.com/javascript/posts/mastering-es6-higher-order-functions-for-arrays",
      "ogImage" : "https://cloud.githubusercontent.com/assets/764487/9474195/82d6a242-4b35-11e5-87a0-43561850b53a.jpg"
    },
    "slug" : "mastering-es6-higher-order-functions-for-arrays",
    "github" : {
        "repoInfo" : {
            "author" : "tiagorg",
            "authorTeamName" : "mastering-es6-higher-order-functions-for-arrays-00f1f0da-author",
            "authorTeamId" : 1723144,
            "url" : "https://github.com/airpair/mastering-es6-higher-order-functions-for-arrays"
        }
    },
    "stats" : {
        "rating" : 4.714285714285714,
        "reviews" : 7,
        "comments" : 14,
        "forkers" : 2,
        "openPRs" : 0,
        "closedPRs" : 0,
        "acceptedPRs" : 0,
        "shares" : 0,
        "words" : 2606
    },
    "tmpl" : "default"
  },



  pubedArchitec: {
    "_id" : ObjectId("550106c2f1377c0c0051cbef"),
    "title" : "Scalable Architecture DR CoN: Docker, Registrator, Consul, Consul Template and Nginx",
    "md" : "No real MD",
    "log" : {
      "last" : {
        "by" : {
            "name" : "Jonathon Kresner",
            "_id" : "5175efbfa3802cc4d5a5e6ed"
        },
        "utc" : "2015-03-16T22:23:33.578Z",
        "action" : "publish"
      },
      history: [
        {
          "action" : "publish",
          "utc" : "2015-03-16T21:39:54.136Z",
          "by" : { "_id" : ObjectId("5501064cb2620c0c009bae70"), "name" : "Graham Jenson" },
          "commit" : "Not yet propagated",
          "_id" : ObjectId("55074daa3c09dd0c009b581f")
        },
        {
          "action" : "publish",
          "utc" : "2015-03-16T21:48:35.616Z",
          "by" : { "_id" : ObjectId("5175efbfa3802cc4d5a5e6ed"), "name" : "Jonathon Kresner" },
          "commit" : "4321756fa5c0cfeeaab27b73273a577a609913fe",
          "_id" : ObjectId("55074fb38dac8f0c00294a3c")
        }
      ]
    },
    "tags" : [
      { "_id" : ObjectId("514825fa2a26ea020000002d"), "slug" : "python", "name" : "python" },
      { "_id" : ObjectId("5249f4d266a6f999a465f897"), "name" : "docker", "slug" : "docker" },
      { "_id" : ObjectId("5153f494d96db10200000011"), "name" : "NGINX", "slug" : "nginx" },
      { "_id" : ObjectId("5358c8081c67d1a4859d2f18"), "name" : "devops", "slug" : "devops" }
    ],
    subscribed: [
      { "userId" : ObjectId("54de72d1bb6e680a0011c65c"), "_id" : ObjectId("5501c781f1377c0c0051eae1") },
      { "userId" : ObjectId("5175efbfa3802cc4d5a5e6ed"), "_id" : ObjectId("55074f993c09dd0c009b5875") },
      { "_id" : ObjectId("550736f54c39d40c0099424c"), "userId": "550736924c39d40c00994241" }
    ],
    "forkers" : [
        { "userId" : ObjectId("54de72d1bb6e680a0011c65c"), "_id" : ObjectId("5501c781f1377c0c0051eae1") },
        { "userId" : ObjectId("5175efbfa3802cc4d5a5e6ed"), "_id" : ObjectId("55074f993c09dd0c009b5875") }
    ],
    "reviews" : [
        {
            "_id" : ObjectId("5502ae9396bc290c00cd048d"),
            "by" : "54de72d1bb6e680a0011c65c",
            "val" : "4",
            "said" : "Hi Graham, thanks for your post! It would be great to hear more about why consul is so important in this pipeline"
        },
        {
            "_id" : ObjectId("550736f54c39d40c0099424c"),
            "by": "550736924c39d40c00994241",
            "val" : "5",
            "said": "Great post, looks like a very useful tool!!!"
        },
        // {
        //     "type" : "post-survey-inreview",
        //     "by" : {
        //         "_id" : "5474a0138f8c80299bcc5243",
        //         "name" : "Rahat Khanna (mappmechanic)",
        //         "email" : "yehtechnologies@gmail.com"
        //     },
        //     "_id" : ObjectId("550738774c39d40c0099427d"),
        //     "votes" : [],
        //     "replies" : [],
        //     "questions" : [
        //         {
        //             "answer" : "4",
        //             "prompt" : "How would you rate the quality of this post?",
        //             "key" : "rating",
        //             "idx" : 0,
        //             "_id" : ObjectId("550738774c39d40c0099427f")
        //         },
        //         {
        //             "answer" : "Nice post. Would try to use Docker.",
        //             "prompt" : "Overall comment",
        //             "key" : "feedback",
        //             "idx" : 1,
        //             "_id" : ObjectId("550738774c39d40c0099427e")
        //         }
        //     ]
        // },
        // {
        //     "_id" : ObjectId("550740e64c39d40c00994413"),
        //     "by" : {
        //         "_id" : "550740ad4c39d40c0099440b",
        //         "name" : "Daniel Walmsley",
        //         "email" : "daniel.walmsley@gmail.com"
        //     },
        //     "type" : "post-survey-inreview",
        //     "votes" : [
        //         {
        //             "_id" : ObjectId("55074fd88dac8f0c00294a4b"),
        //             "val" : 1,
        //             "by" : {
        //                 "_id" : "5175efbfa3802cc4d5a5e6ed",
        //                 "name" : "Jonathon Kresner",
        //                 "email" : "jk@airpair.com"
        //             }
        //         }
        //     ],
        //     "replies" : [],
        //     "questions" : [
        //         {
        //             "_id" : ObjectId("550740e64c39d40c00994415"),
        //             "idx" : 0,
        //             "key" : "rating",
        //             "prompt" : "How would you rate the quality of this post?",
        //             "answer" : "5"
        //         },
        //         {
        //             "_id" : ObjectId("550740e64c39d40c00994414"),
        //             "idx" : 1,
        //             "key" : "feedback",
        //             "prompt" : "Overall comment",
        //             "answer" : "Looks good, good to hear a Maori perspective on Docker."
        //         }
        //     ]
        // },
        // {
        //     "type" : "post-survey-inreview",
        //     "by" : {
        //         "_id" : "5507428d4c39d40c00994461",
        //         "name" : "Duncan Tyler",
        //         "email" : "dunkthetyler@gmail.com"
        //     },
        //     "_id" : ObjectId("550742f94c39d40c00994475"),
        //     "votes" : [],
        //     "replies" : [],
        //     "questions" : [
        //         {
        //             "answer" : "5",
        //             "prompt" : "How would you rate the quality of this post?",
        //             "key" : "rating",
        //             "idx" : 0,
        //             "_id" : ObjectId("550742f94c39d40c00994477")
        //         },
        //         {
        //             "answer" : "Docker definitely sounds like a goer, thanks Graham!",
        //             "prompt" : "Overall comment",
        //             "key" : "feedback",
        //             "idx" : 1,
        //             "_id" : ObjectId("550742f94c39d40c00994476")
        //         }
        //     ]
        // }
    ],
    history: {
      "created" : "2015-03-12T03:23:46.945Z",
      "submitted" : "2015-03-12T04:05:46.709Z",
      "published" : "2015-03-16T21:39:54.136Z",
      "live": {
        "updated" : "2015-03-16T22:23:33.578Z",
        "by" :    ObjectId("5175efbfa3802cc4d5a5e6ed"),
        "commit" : "4321756fa5c0cfeeaab27b73273a577a609913fe"
      }
    },
    "by" : {
        "userId" : ObjectId("5501064cb2620c0c009bae70"),
        "name" : "Graham Jenson",
        "bio" : "I am a Developer who builds things, I blog over at http://www.maori.geek.nz/",
        "social" : {
            "gh" : "grahamjenson",
            "tw" : "GrahamJenson",
            "gp" : "https://plus.google.com/+GrahamJenson"
        },
        "avatar" : "//0.gravatar.com/avatar/7b9e77978853a15053b169abb710a787"
    },
    "assetUrl" : "https://maorigeek.s3.amazonaws.com/uploads/docker_whale.png_1411805342.jpg_1421807584.jpg",
    "htmlHead" : {
        "ogUrl" : "https://www.airpair.com/scalable-architecture-with-docker-consul-and-nginx",
        "ogType" : "article",
        "ogTitle" : "Scalable Architecture DR CoN: Docker, Registrator, Consul, Consul Template and Nginx",
        "description" : "In this post I will describe how to use Docker to plug together Consul, Consul Template, Registrator and Nginx into a truly scalable architecture that I am calling DR CoN. Once all plugged together, DR CoN lets you add and remove services from the architecture without having to rewrite any configuration or restart any services, and everything just works!",
        "title" : "Scalable Architecture DR CoN: Docker, Registrator, Consul, Consul Template and Nginx",
        "ogDescription" : "In this post I will describe how to use Docker to plug together Consul, Consul Template, Registrator and Nginx into a truly scalable architecture that I am calling DR CoN. Once all plugged together, DR CoN lets you add and remove services from the architecture without having to rewrite any configuration or restart any services, and everything just works!",
        "canonical" : "https://www.airpair.com/scalable-architecture-with-docker-consul-and-nginx",
        "ogImage" : "https://maorigeek.s3.amazonaws.com/uploads/docker_whale.png_1411805342.jpg_1421807584.jpg"
    },
    "slug" : "scalable-architecture-dr-con-docker-registrator-consul-consul-template-and-nginx",
    "github" : {
        "repoInfo" : {
            "url" : "https://github.com/airpair/scalable-architecture-dr-con-docker-registrator-consul-consul-template-and-nginx",
            "authorTeamId" : 1358851,
            "authorTeamName" : "scalable-architecture-dr-con-docker-registrator-consul-consul-template-and-nginx-0051cbef-author",
            "author" : "grahamjenson"
        }
    },
    "stats" : {
        "rating" : 4.6,
        "reviews" : 5,
        "comments" : 5,
        "forkers" : 2,
        "openPRs" : 0,
        "closedPRs" : 0,
        "acceptedPRs" : 0,
        "shares" : 0,
        "words" : 1192
    },
    "tmpl" : "default",
  },

  tos: {
    "_id" : ObjectId("54dd8480f9cf4b0a0016d505"),
    "md" : "## This Agreement was last modified on March 24, 2015.\n\nPlease read these Terms of Service (\"Agreement\", \"Terms of Service\") carefully before using http://www.airpair.com/ (\"the Site\") operated by AirPair, Inc (\"us\", \"we\", or \"our\"). This Agreement sets forth the legally binding terms and conditions for your use of the Site at http://www.airpair.com/.\n \nBy accessing or using the Site in any manner, including, but not limited to, visiting or browsing the Site or contributing content or other materials to the Site, you agree to be bound by these Terms of Service. Capitalized terms are defined in this Agreement.\n\n## Disclaimers\n\nIf you choose to use the site (airpair.com) and services, you do so at your sole risk. You acknowledge and agree that AirPair inc does not have an obligation to conduct background checks on any member, including, but not limited to. customers and experts. It may investigate in its sole discretion. The site, services, and collective content are provided “AS IS”, without warranty of any kind, either express or implied. Without limiting the foregoing, Airpair explicitly disclaims any warranties of merchantability, fitness for a particular purpose, quiet enjoyment or non-infringement, and any warranties arising out of course of dealing or usage of trade.\n\nAirPair makes no warranty that the site, services, or collective content, including any information provided via requests, in our communication channels (such as hipchat / slack), and during sessions will meet your requirements or be available on an uninterrupted, secure, or error-free basis.\n\nAirPair makes no warranty regarding the quality of any session, the services, or collective content or the accuracy, timeliness, truthfulness, completeness or reliability of any collective content obtained through the site, or the services. No advice or information, whether oral or written, obtained from AirPair or through the sit, services,  or collective content, will create any warranty not expressly made herein. You are solely responsible for all of your communications and interactions with other users of the site or services and with other persons with whom you communicate or interact as a result of your use of site or services.\n\nYou understand that AirPair does not make any attempt to verify the statements of users of the site or services. AirPair makes no representation or warranties as to the conduct of users of the site or service or their compatibility with any current or future users of the site or services. You agree to take reasonable precautions in all communications and interactions with other users of the site or services and with other persons with whom you communicate or interact as a result of your use of the site or services, including, but not limited to, experts, regardless of whether such communications or interactions are organized by AirPair.\n\n### Limitation of Liability\n\nYou acknowledge and agree that, to the maximum extent permitted by law. The entire wish arising out of your access to and use of the site, services and collective content, requests, or sessions via the site and services, and any contact you have with other users of AirPair whether in person, by phone, online or other means remains with you. Neither AirPair nor any other party involved in creating, producing or delivering the site, services, or collective content will be liable for any incidental, special, exemplary or consequential damages, including lost profits, loss of data or loss of goodwill, service interruption, computer damage or system failure or the cost of substitute products or services, or for any damages for personal or bodily injury or emotional distress arising out of or in connection with these terms, from the use of of inability to use the site, services or collective content, from any communications, interactions or meetings with other users of the site, or services or other persons with whom you communicate or interact as a result of your use of the site or services, whether based on warranty, contract, tort (including negligence), product liability or any other legal theory, and whether or not AirPair has been informed of possibility of such damage, even if a limited remedy set forth herein is found to have failed of its essential purpose. In no event will Airpair aggregate liability arising out of or in connection with any sessions via the site and services, or front the use of or inability to use the site, services or collective content and in connection with any interactions with any other members.\n\n### Intellectual Property\n\nThe Site and its original content, features and functionality are owned by AirPair, Inc and are protected by international copyright, trademark, patent, trade secret and other intellectual property or proprietary rights laws.\n\n### Termination\n\nWe may terminate your access to the Site, without cause or notice, which may result in the forfeiture and destruction of all information associated with you. All provisions of this Agreement that by their nature should survive termination shall survive termination, including, without limitation, ownership provisions, warranty disclaimers, indemnity, and limitations of liability.\n\n### Links To Other Sites\n\nOur Site may contain links to third-party sites that are not owned or controlled by AirPair, Inc.\n\nAirPair, Inc has no control over, and assumes no responsibility for, the content, privacy policies, or practices of any third party sites or services. We strongly advise you to read the terms and conditions and privacy policy of any third-party site that you visit.\n\n### Governing Law\n\nThis Agreement (and any further rules, polices, or guidelines incorporated by reference) shall be governed and construed in accordance with the laws of California, United States, without giving effect to any principles of conflicts of law.\n\n### Changes To This Agreement\n\nWe reserve the right, at our sole discretion, to modify or replace these Terms of Service by posting the updated terms on the Site. Your continued use of the Site after any such changes constitutes your acceptance of the new Terms of Service.\n\nPlease review this Agreement periodically for changes. If you do not agree to any of this Agreement or any changes to this Agreement, do not use, access or continue to access the Site or discontinue any use of the Site immediately.\n\n### Contact Us\n\nIf you have any questions about this Agreement, please contact us team@airpair.com.",
    "title" : "AirPair Terms of Service",
    "tags" : [
        {
            "_id" : ObjectId("5351134f1c67d1a4859d2de8"),
            "name" : "news",
            "slug" : "news"
        }
    ],
    "forkers" : [],
    "reviews" : [],
    "by" : {
        "_id" : ObjectId("52ad320166a6f999a465fdc5"),
        "name" : "Air Pair",
        "email" : "team@airpair.com",
        "avatar" : "//0.gravatar.com/avatar/e79ddd03edffc5c0669b78e7a090b037",
        "links" : {
            "ap" : "airpair",
            "gh" : "pairy",
            "gp" : "https://plus.google.com/+AirPair"
        }
    },
    "assetUrl" : "//www.airpair.com/static/img/pages/faq/og.jpg",
    "github" : {
        "repoInfo" : {
            "reviewTeamId" : 1294652,
            "authorTeamId" : 1294653,
            "owner" : "jkresner",
            "url" : "https://api.github.com/repos/airpair/airpair-terms-of-service",
            "author" : "jkresner"
        }
    },
    "slug" : "airpair-terms-of-service",
    "tmpl" : "faq",
    "stats" : {
        "rating" : null,
        "reviews" : 0,
        "comments" : 0,
        "forkers" : 1,
        "openPRs" : 0,
        "closedPRs" : 1,
        "acceptedPRs" : 1,
        "shares" : 0,
        "words" : 2710
    },
    "htmlHead" : {
        "title" : "AirPair Terms of Service",
        "canonical" : "/tos",
        "ogType" : "article",
        "ogTitle" : "AirPair Terms of Service",
        "ogImage" : "//www.airpair.com/static/img/pages/faq/og.jpg",
        "ogVideo" : null,
        "ogUrl" : "/tos",
        "ogDescription" : "AirPair Terms of Service",
        "description" : "AirPair Terms of Service"
    },
    "history" : {
        "created" : ISODate("2015-02-13T04:58:40.754Z"),
        "updated" : ISODate("2015-03-27T21:15:47.069Z"),
        "submitted" : ISODate("2015-02-13T05:28:15.259Z"),
        "published" : ISODate("2015-02-13T06:03:10.160Z"),
        "live" : {
            "published" : ISODate("2015-03-27T21:15:47.069Z"),
            "by" : ObjectId("5175efbfa3802cc4d5a5e6ed"),
            "commit" : "a11885585642c95f9e60b39cbe0101ac9248b5ba"
        }
    },
    "log" : {
        "last" : {
            "by" : {
                "name" : "Jonathon Kresner",
                "_id" : ObjectId("5175efbfa3802cc4d5a5e6ed")
            },
            "utc" : ISODate("2015-03-27T21:15:47.069Z"),
            "action" : "propagateMDfromGithub"
        },
        "history" : [
            {
                "action" : "createByAuthor",
                "utc" : ISODate("2015-02-13T04:58:40.754Z"),
                "_id" : ObjectId("54dd8480f9cf4b0a0016d506"),
                "by" : {
                    "_id" : ObjectId("5175efbfa3802cc4d5a5e6ed"),
                    "name" : "Jonathon Kresner"
                }
            }
        ]
    }
  },

  priv: {
    "_id" : ObjectId("54dd8418f9cf4b0a0016d4fb"),
    "md" : "##### Last updated: March 30, 2015.\n\nWe recognize that your privacy is very important and take it seriously. This Privacy Policy describes the policies and procedures of AirPair, Inc. (the “Company”) regarding the collection, use and disclosure of your information when you use the Company’s consulting services (the “Service”). This Privacy Policy does not apply to information we collect by other means (including offline) or from other sources.\n\n**Information Collection and Use**\n\nCompany uses information we collect to analyze how the Service is used, diagnose service or technical problems, maintain security, personalize content, remember information to help you efficiently access your account, monitor aggregate metrics such as total number of visitors, traffic, and demographic patterns, and track user content and users as necessary to comply with the Digital Millennium Copyright Act and other applicable laws.\n\n#### User-Provided Information: \nYou provide us information about yourself, such as your name and e-mail address, if you register for a member account with the Service. Your name and other information you choose to add to your profile will be available for public viewing on the Service. We may use your e-mail address to send you Service-related notices (including any notices required by law, in lieu of communication by postal mail). You can control receipt of- certain Service-related messages on your Settings page. We may also use your contact information to send you marketing messages. If you do not want to receive such messages, you may opt out by following the instructions in the message. If you correspond with us by e-mail, we may retain the content of your e-mail messages, your e-mail address and our responses.\n\nYou also provide us information in content you post to the Service. Content you post to public areas of the Service may be publicly viewed.\nThe Service may permit you to invite friends to join the Service. If you choose to do so, we will use the e-mail addresses and names you provide to send such invitations, and store this information to register your friends if your invitation is accepted and to track the success of our invitation service.\n\n#### Cookies:\nWhen you visit the Service, we may send one or more “cookies” – a small data file – to your computer to uniquely identify your browser and let Company help you log in faster and enhance your navigation through the site. A cookie may convey anonymous information about how you browse the Service to us, but does not collect personal information about you. A persistent cookie remains on your hard drive after you close your browser so that it can be used by your browser on subsequent visits to the Service. Persistent cookies can be removed by following your web browser’s directions. A session cookie is temporary and disappears after you closeS your browser. You can reset your web browser to refuse all cookies or to indicate when a cookie is being sent. However, some features of the Service may not function properly if the ability to accept cookies is disabled.\n\n#### Log Files:\n\nLog file information is automatically reported by your browser each time you access a web page. When you use the Service, our servers automatically record certain information that your web browser sends whenever you visit any website. These server logs may include information such as your web request, Internet Protocol (“IP”) address, browser type, referring / exit pages and URLs, number of clicks, domain names, landing pages, pages viewed, and other such information.\n\n#### Clear Gifs Information: \n\nWhen you use the Service, we may employ clear gifs (also known as web beacons) which are used to track the online usage patterns of our users anonymously. No personally identifiable information from your account is collected using these clear gifs. In addition, we may also use clear gifs in HTML-based e-mails sent to our users to track which e-mails are opened by recipients. The information is used to enable more accurate reporting and make Company better for our users.\n\n#### Third-Party Services: \n\nCompany uses a third-party analytics service to help understand use of the Service. The third-party analytics service collects the information sent by your browser as part of a web page request, including cookies and your IP address. Use of this information by each respective third party analytics service is governed by its privacy policy.\n\n**How We Share Your Information**\n\n#### Personally Identifiable Information: \nCompany may share your personally identifiable information with third parties for the purpose of providing the Service to you. If we do this, such third parties’ use of your information will be bound by this Privacy Policy. We securely transmit your credit card data to our payment processing partner during order processing. We may store personal information in locations outside the direct control of Company (for instance, on servers or databases co-located with hosting providers).\nAs we develop our business, we may buy or sell assets or business offerings. Customer, e-mail, and visitor information is generally one of the transferred business assets in these types of transactions. We may also transfer or assign such information in the course of corporate divestitures, mergers, or dissolution.\nWe may share or disclose your information with your consent, such as if you choose to sign on to the Service through a third-party service. We cannot control third parties’ use of your information.\nCompany may disclose your personal information if required to do so by law or subpoena or if we believe that it is reasonably necessary to comply with a law, regulation or legal request; to protect the safety of any person; to address fraud, security or technical issues; or to protect Company’s rights or property.\n\n#### Non-Personally Identifiable Information:\nWe may share non-personally identifiable information (such as anonymous usage data, referring/exit pages and URLs, platform types, number of clicks, etc.) with interested third parties to help them understand the usage patterns for certain Company services.\nCompany may allow third-party ad servers or ad networks to serve advertisements on the Service. These third-party ad servers or ad networks use technology to send, directly to your browser, the advertisements and links that appear on Company. They automatically receive your IP address when this happens. They may also use other technologies (such as cookies, JavaScript, or web beacons) to measure the effectiveness of their advertisements and to personalize the advertising content. Company does not provide any personally identifiable information to these third-party ad servers or ad networks without your consent. However, please note that if an advertiser asks Company to show an advertisement to a certain audience and you respond to that advertisement, the advertiser or ad server may conclude that you fit the description of the audience they are trying to reach. In addition, third-party advertisers may use information about your visits to this and other websites in order to provide advertisements about goods and services of interest to you. The techniques these third-party ad servers or ad networks employ do not collect personal information such as your name, email address, postal address or telephone number. You can visit http://www.networkadvertising.org/choices/ to opt out of third-party targeted advertising. The Company Privacy Policy does not apply to, and we cannot control the activities of, third-party advertisers. Please consult the respective privacy policies of such advertisers for more information.\n\n**How We Protect Your Information**\n\nCompany uses commercially reasonable physical, managerial, and technical safeguards to preserve the integrity and security of your personal information. We cannot, however, ensure or warrant the security of any information you transmit to Company or guarantee that your information on the Service may not be accessed, disclosed, altered, or destroyed by breach of any of our physical, technical, or managerial safeguards.\nIn the event that personal information is compromised as a result of a breach of security, Company will promptly notify those persons whose personal information has been compromised.\n\n#### Your Choices About Your Information\n\nYou may, of course, decline to submit personally identifiable information through the Service, in which case Company may not be able to provide certain services to you. You may update or correct your account information and e-mail preferences at any time by logging in to your account.\n\n#### Children’s Privacy\n\nProtecting the privacy of young children is especially important. Company does not knowingly collect or solicit personal information from anyone under the age of 13 or knowingly allow such persons to register with the Service. If we become aware that we have collected personal information from a child under age 13 without verification of parental consent, we take steps to remove that information.\n\n#### Links to Other Web Sites\n\nWe are not responsible for the practices employed by websites linked to or from the Service, nor the information or content contained therein. Please remember that when you use a link to go from the Service to another website, our Privacy Policy is no longer in effect. Your browsing and interaction on any other website, including those that have a link on our website, is subject to that website’s own rules and policies.\n\n#### Changes to Our Privacy Policy\n\nIf we change our privacy policies and procedures, we will post those changes on this page to keep you aware of what information we collect, how we use it and under what circumstances we may disclose it. Changes to this Privacy Policy are effective when they are posted on this page.\nIf you have any questions about this Privacy Policy, please contact us at team@airpair.com, or send mail to:\n\nAirPair Inc., 875 Howard St, San Francisco, CA 94103\n",
    "title" : "AirPair Privacy Policy",
    "tags" : [
        {
            "_id" : ObjectId("5351134f1c67d1a4859d2de8"),
            "name" : "news",
            "slug" : "news"
        }
    ],
    "by" : {
        "_id" : ObjectId("52ad320166a6f999a465fdc5"),
        "name" : "Air Pair",
        "email" : "team@airpair.com",
        "avatar" : "//0.gravatar.com/avatar/e79ddd03edffc5c0669b78e7a090b037",
        "links" : {
            "ap" : "airpair",
            "gh" : "pairy",
            "gp" : "https://plus.google.com/+AirPair"
        }
    },
    "assetUrl" : "https://www.airpair.com/static/img/pages/faq/og.jpg",
    "slug" : "airpair-privacy-policy",
    "tmpl" : "faq",
    "htmlHead" : {
        "title" : "AirPair Privacy Policy",
        "canonical" : "/privacy",
        "ogType" : "article",
        "ogTitle" : "AirPair Privacy Policy",
        "ogImage" : "//www.airpair.com/static/img/pages/faq/og.jpg",
        "ogVideo" : null,
        "ogUrl" : "/privacy",
        "ogDescription" : "AirPair Privacy Policy",
        "description" : "AirPair Privacy Policy"
    },
    "history" : {
      "created" : ISODate("2015-02-13T04:56:56.073Z"),
      "updated" : ISODate("2015-03-30T21:13:03.677Z"),
      "submitted" : ISODate("2015-02-13T04:58:27.967Z"),
      "published" : ISODate("2015-02-13T06:02:25.001Z"),
      "live" : {
          "published" : ISODate("2015-03-30T21:13:03.677Z"),
          "by" : ObjectId("5175efbfa3802cc4d5a5e6ed"),
          "commit" : "31f5599535e43dbb2651e96e85af7238cf7f20d0"
      }
    }
  },

  refp: {
    "_id" : ObjectId("55ca854870a05e1100404439"),
    "title" : "Refund Policy",
    "md" : "Synopsis\n> Only two scenarios qualify customers for refunds. If you are short on time, \nwe think a minute to read [sec 2.1](#2-1-guarantee-terms) and [sec 3.2](#3-2-delivering-on-schedule) is adequate to understand when customers are entitled to refunds. For full context and the nitty gritty, you\ncan read this policy in full. It covers responsibilities of\ncustomers and experts impacting refunds as well as explicitly flagging some\n(but not all) scenarios that do not qualify.\n\n## 1. AirPair is a Marketplace\n\n### 1.1 Marketplace vs Consulting Services\n\n***AIRPAIR*** <sup>**AIRPAIR** is defined as the services provided through the domain [airpair.com](https://www.airpair.com/)</sup> provides a platform for connecting and facilitating ***CUSTOMER(s)*** <sup>**CUSTOMER** is defined as user *who has paid to* to get software help via AIRPAIR and not had their payment(s) refunded or reversed.</sup> and ***EXPERT(s)*** <sup>**EXPERT** is defined as a user presented on AIRPAIR as a supplier of paid software consulting services</sup> to ***EXCHANGE*** <sup>**EXCHANGE** is defined as a `booking` by a CUSTOMER with payment into AirPair escrow intended for released to the EXPERT upon delivery of software consulting services.</sup> high-end software related consulting services.\n\nBy participating in an EXCHANGE, you accept this Refund Policy and acknowledge:\n1. This Refund Policy is designed in the context that AIRPAIR is a marketplace - and NOT a supplier of Software Consulting Services. \n2. CUSTOMERS are solely responsible for incorporating information, recommendations and code provided by EXPERTS into their own products.\n3. AIRPAIR and EXPERTS are fully indemnified against damages or loss of revenue caused or experienced by CUSTOMERS.\n\n### 1.2 Your responsibilities \n\nHealthy `consumer <-> marketplace <-> supplier` interactions are \nmore complex than traditional `consumer <-> supplier` ecommerce.\n\nTo continue meeting CUSTOMER expectations for fast turnaround and efficient \nEXCHANGE with high-quality available EXPERTS, CUSTOMERS and EXPERTS have duties \ntowards one another to assist in completing EXCHANGES in reasonable timeframes. \nFailure to fulfil responsibilities outlined in sec 3 and sec 4 in a reliable or \ntimely manner impact entitlement to and extent of refunds.\n\n## 2. AirPair Money Back Guarantee\n\nTo save **CUSTOMERS** time researching EXPERTS and availability\n(required on most other platforms), AIRPAIR was designed for \nCUSTOMERS to trust the marketplace in its representation of EXPERTS\nas suitable quality and relevant for a given EXCHANGE. \n\nAIRPAIR provides curated recommendations, ratings and links of social profiles\nto help CUSTOMERS evaluate and choose whom to book. CUSTOMERS are, however, \nultimately responsible for deciding EXPERTs matches their expectations and\nconfirm so implicitly when they continue working past their first hour with any new EXPERT.\n\nCUSTOMERS are entitled to NO QUESTIONS ASKED MONEY BACK WITHIN 5 BUSINESS DAYS\nwithin the constraints outlined in [sec 2.1](#2-1-guarantee-terms).\n\n### 2.1 Guarantee Terms\n> - - - \n**In cases when **CUSTOMER** expectations are NOT met, **AIRPAIR** will fully \nrefund **(or credit)** the total purchase amount, if **CUSTOMER** has **<sub>(1)</sub>** NOT RELEASED ESCROW and **<sub>(2)</sub>** NOT WORKED PAST THEIR FIRST HOUR with an **EXPERT** and <sub>(3)</sub> within 7 days CLAIMED\nVIA EMAIL to team@airpair.com their **EXPERT** was unfit for the presented requirements.**\n- - -\n\n## 3. Expert responsibilities\n\n### 3.1 Confirming delivery time\n\nAIRPAIR allows CUSTOMERS to book EXPERTS before the parties agree on\ndelivery time (most commonly the time of a pairing session). When booked, \npayment is immediately secured in escrow and EXPERTS are expected to proactively \nnegotiate and confirm a delivery time as quickly as possible. If the expert \nhas not confirmed or suggested alternate time options after 12 hours from being\nbooked the customer may swap to another EXPERT.\n\n### 3.2 Delivering on schedule\n\n> - - -\n**In the event an **EXPERT** is (and not the **CUSTOMER** in any way) at fault for failing to completing all scheduled consulting time, **CUSTOMERS** have the right to a full refund (or credit) of all funds associated with the \n**EXCHANGE** that have not been released from escrow.**\n- - -\n\n#### 3.2.1 Live Pairing & Offline Scenarios\n\nMost commonly, delivering scheduled time means punctually attending and being\npresent for the entire length of a live pairing session.\n\nIn the case of offline work, the confirmed booking time represents\nthe agreement of when the work will be complete and handed over.\n\n#### 3.2.2 Partial delivery\n\nIf CUSTOMER and EXPERT originally worked for 10 hours, that were released from from escrow, then the CUSTOMER books the EXPERT for 5 additional hours, but the EXPERT only completes 2 by the delivery time, the CUSTOMER is entitled to a refund (or credit) for the full amount paid for 5 hours.\n\n## 4. Customer responsibilities\n\n### 4.1 Confirming delivery time\n\nAIRPAIR allows CUSTOMERS to book EXPERTS before the parties agree on\ndelivery time (most commonly the time of a pairing session). \n\nCUSTOMER must **engage EXPERTS via chat** as soon as possible to \nlock in delivery. Refunds are not available if a CUSTOMER has not replied to \nan EXPERT via chat within 24 hours of a booking - even if a delivery time is\nnever established.\n\n### 4.2 Honoring Bookings\n\nOnce a CUSTOMER books an EXPERT, they are required to complete the EXCHANGE \nwithin 8 weeks.\n\nRefunds are NOT entitled when:\n1. CUSTOMERS change their mind\n2. Requirements change or become no longer relevant\n3. CUSTOMER is at fault for delaying full completion of EXCHANGE within 8 weeks\n\n### 4.3 Inhibiting delivery\n\nIf a CUSTOMER inhibits an EXPERT from being able to deliver service,\nthe EXPERT is entitled to full payment and refunds are not available.\n\nIn the case of live pairing, if a CUSTOMER's setup or bandwidth inhibits \ncommunications, or they are more than 15 minutes late, the EXPERT is entitled to consider the EXCHANGE complete.\n\n## 5. Unconsumed credit\n\nAirPair offers CUSTOMERS options to purchase <sub>(1)</sub> specific blocks of\n**time** (`\"bookings\"`) locked in with a particular EXPERT and <sub>(2)</sub> **credit** that enables CUSTOMERS to more flexibly deduct amounts from a balance \nwhen EXPERTS, quantity of help and even requirements are not yet known. \n\nCredit often comes with a bonus 5% - 20% extra spend, depending on purchase size \nand is useful for team scenarios where financial controllers prefer their\ncredit card info and purchase additional privileges not to to be shared with \ntheir developers.\n\n### 5.1 Credit expiry\n\nCredit is valid until and expires either:\n\n1. At the end of the current lunar year.\n2. After 3 months, if purchased after Oct 1st in the current year.\n\n### 5.2 Credit is non-refundable\n\nCredit and partial credit purchases are non-refundable *unless* the purchase\nis the CUSTOMERS first purchase via AirPair and their first  EXPERT is claimed \nunfit within the boundaries outlined in Sec 2.1",
    "tags" : [ { "_id" : ObjectId("5181d0ad66a6f999a465f22c"), "name" : "payment", "slug" : "payment" } ],
    "by" : {
        "_id" : ObjectId("52ad320166a6f999a465fdc5"),
        "name" : "Air Pair",
        "email" : "team@airpair.com",
        "avatar" : "//0.gravatar.com/avatar/e79ddd03edffc5c0669b78e7a090b037",
        "bio" : "Team Airpair",
        "links" : {
            "ap" : "airpair",
            "gh" : "pairy",
            "gp" : "https://plus.google.com/+AirPair"
        }
    },
    "assetUrl" : "https://www.airpair.com/static/img/pages/faq/og.jpg",
    "slug" : "refund-policy",
    "tmpl" : "faq",
    "htmlHead" : {
        "ogImage" : "https://www.airpair.com/static/img/pages/faq/og.jpg",
        "canonical" : "https://www.airpair.com/refund-policy",
        "ogDescription" : "AirPair Refund Policy",
        "title" : "AirPair Refund Policy",
        "description" : "AirPair Refund Policy",
        "ogTitle" : "/refund-policy",
        "ogType" : "article",
        "ogUrl" : "https://www.airpair.com/refund-policy"
    },
    "history" : {
      "created" : ISODate("2015-08-11T23:29:12.935Z"),
      "updated" : ISODate("2015-08-13T07:05:22.892Z"),
      "submitted" : ISODate("2015-08-12T23:06:23.759Z"),
      "published" : ISODate("2015-08-12T23:07:34.503Z"),
      "live" : {
        "published" : ISODate("2015-08-13T07:05:22.892Z"),
        "by" : ObjectId("5175efbfa3802cc4d5a5e6ed"),
        "commit" : "613d60ea55325d483117011996534e9db0647ed2"
      }
    },
    log: { last: {}, history: [] }
  },

  angg: {
    "_id" : ObjectId("542c4b4f8e66ce0b00c885a4"),
    "assetUrl" : "https://i.imgur.com/GA8g15e.jpg",
    "by" : {
        "_id" : ObjectId("527280b766a6f999a465fa9e"),
        "name" : "Todd Motto",
        "email" : "todd@toddmotto.com",
        "avatar" : "https://avatars.githubusercontent.com/u/1655968?v=3",
        "bio" : "Todd Motto is a Google Developer Expert, Lead Front-End Engineer at Appsbroker, conference speaker and open source evangelist. His award-winning Javascript tool Conditionizr was .NET Magazine's Open Source Project of the Year finalist.",
        "links" : {
            "gh" : "toddmotto",
            "so" : "http://stackoverflow.com/users/3198969/todd-motto",
            "in" : "hw_opPXmqj",
            "tw" : "toddmotto",
            "gp" : "104675806858920385950"
        }
    },
    "md" : "## 1 Intro to AngularJS\nAngular is a client-side MVW JavaScript framework for writing compelling web applications. It's built and maintained by Google and offers a futuristic spin on the web and its upcoming features and standards.\n\nMVW stands for Model-View-Whatever, which gives us flexibility over design patterns when developing applications. We might choose an MVC (Model-View-Controller) ",
    "slug" : "angularjs-tutorial",
    "tags" : [
        {
            "_id" : ObjectId("5149dccb5fc6390200000013"),
            "name" : "AngularJS",
            "slug" : "angularjs"
        }
    ],
    "title" : "AngularJS Tutorial: A Comprehensive 10,000 Word Guide",
    "htmlHead" : {
        "title" : "AngularJS Tutorial: a comprehensive 10,000 word guide",
        "canonical" : "http://www.airpair.com/angularjs",
        "ogType" : "article",
        "ogTitle" : "AngularJS Tutorial: a comprehensive 10,000 word guide",
        "ogVideo" : null,
        "ogUrl" : "http://www.airpair.com/angularjs",
        "ogDescription" : "Written by Google Developer Expert (GDE) Todd Motto, this Angular tutorial serves as an ultimate resource for learning AngularJS.",
        "description" : "Written by Google Developer Expert (GDE) Todd Motto, this Angular tutorial serves as an ultimate resource for learning AngularJS.",
        "ogImage" : "https://i.imgur.com/GA8g15e.jpg"
    },
    "history" : {
      "created" : ISODate("2014-10-01T18:43:27.202Z"),
      "updated" : ISODate("2015-02-03T18:11:28.825Z"),
      "published" : ISODate("2014-10-03T02:21:49.051Z"),
      "live" : {
        "published" : ISODate("2014-10-03T02:21:49.051Z"),
        "by" : ObjectId("5175efbfa3802cc4d5a5e6ed")
      }
    },
    log: { last: {}, history: [] }
  },

  exps_deep: {
    "_id" : ObjectId("541a36c3535a850b00b05697"),
    "assetUrl" : "https://cloud.githubusercontent.com/assets/979542/9256432/2ec6296a-41a4-11e5-931a-7f0bc48fe8b4.png",
      by: {
        _id: ObjectId("5175efbfa3802cc4d5a5e6ed"),
        "name" : "Jonathon Kresner", "email" : "jk@airpair.com",
        "avatar" : "https://avatars.githubusercontent.com/u/979542?v=3",
        "bio" : "Jonathon Kresner is AirPair's CEO and Founder. He conceived AirPair to help developers build ideas faster and stay un-stuck. He's decided to put AirPair to the test, by rebuilding airpair.com from scratch in 90 days with daily help from the best AngularJS, NodeJS and MongoDB experts on the web.",
        "links" : {
            "ap" : "hackerpreneur",
            "gh" : "jkresner",
            "so" : "http://stackoverflow.com/users/178211/jonathon-kresner",
            "bb" : "hackerpreneur",
            "in" : "d9YFKgZ7rY",
            "tw" : "hackerpreneur",
            "al" : "jkresner",
            "gp" : "https://plus.google.com/117132380360243205600"
        }
    },
    "md" : "Synopsis\n> There are major optimizations (and bottlenecks) you can spot by passing\nthrough your `ExpressJS Middleware` with a fine tooth comb. I was originally \nstuck for 6 hours on a middleware issue while settings up PassportJS the second\ntime round after noticing 10,000,000+ sessions in AirPair's MongoDB production\ninstance in late 2014. There's good stuff in this deep dive for all levels of\nNode.js developers building on express. The main take away is **watch out for the order you add ExpressJS Middleware** to your app. As I'll cover more than once below, a tiny swap in middleware order can have HUGE consequences.\n\n<sub>First published Oct 2014, Updated Aug 2015, intended to significantly \nenhance on discussion around bots, scrappers & analytics in Nov 2015.</sub>\n\n## ExpressJS & PassportJS 101\n\nThough I'd setup ExpressJS and PassportJS in 2013 for the *v0* version\nof airpair.com, I didn't deeply understand each or their relationship with\none another. Around October 2014 I noticed some 10,000,000 active session documents in MongoDB, which was obviously not right. \n\nLuckily it never affected us in a material way, and at the time I didn't want to \ntake my chances. So I spent some time observing how Express and PassportJS plug \ninto each other, here's what I learned on the way to uncovering what was going\nwrong.\n\n### There is only ONE Session\n\nAs per the PassportJS docs<sup>The official [PassportJS docs](http://passportjs.org/guide/configure/)</sup> configuring Passport via\nexpress middleware looks something like this:\n\n<!--?prettify lang=javascript linenums=false?-->\n\n    app.configure(function() {\n      app.use(express.static('public'));\n      app.use(express.cookieParser());\n      app.use(express.bodyParser());\n      app.use(express.session({ secret: 'keyboard cat' }));\n      app.use(passport.initialize());\n      app.use(passport.session());\n      app.use(app.router);\n    });\n\nThe syntax is a bit misleading I think ... \n\nThe first thing to conceptually get your head around is that even though you configure `express.session()` and`passport.session()`, there is really only one session, which is managed by Express. Passport merely piggy backs off the ExpressJS session to store data for authenticated users. \n\nLet's take a look at how:\n\n### ExpressJS Sessions & `req.session`\n\n`req.session` is just a json object that gets persisted by the `express-session` middleware, using a store of your choice e.g. Mongo or Redis. Logging to the terminal, you'll see the default session object looks something like:\n\n<!--?prettify lang=javascript linenums=false?-->\n\n    req.session = { cookie: \n      { path: '/',\n        _expires: Thu Nov 07 2014 09:39:45 GMT-0700 (PDT),\n        originalMaxAge: 100000,\n        httpOnly: true } }\n\nIf you open up your persistence store and look at the documents, you'll see the req.session object is an attribute of the the entire document that also comes with an `id` and `expires` attribute.\n\n<!--?prettify lang=javascript linenums=false?-->\n\n    {\n        _id : \"svZGs99EIvDkwW_60PRwlafU9Y_7_m-N\",\n        session : { cookie:{originalMaxAge:100000,expires:\"2014-11-07T02:11:16.320Z\",httpOnly:true,path:\"/\"},\n        expires : ISODate(\"2014-11-07T02:11:16.320Z\")\n    }\n\nExpress stuffs the id of the session object into a cookie on the client's browser, which gets passed back to express in a header on every request. This is how Express identifies multiple requests as belonging to a single session even if the user is not logged in. With the id from the cookie header, Express reads the session store and puts all the info onto req.session, which is available to you on each request.\n\n#### Harnessing `req.session` yourself\n\nYou can stuff anything you like onto the req.session object and Express will automatically persist it back to the session store for a given session (unique id). For example, if a user can't access a page because they are not logged in, airpair.com uses a custom made-up attribute called `return_to` to direct the user to the right page after login. \n\n<!--?prettify lang=javascript linenums=true?-->\n\n    { cookie: \n      { path: '/',\n        _expires: Thu Oct 09 2014 09:39:45 GMT-0700 (PDT),\n        originalMaxAge: 100000,\n        httpOnly: true },\n        passport: { user: { _id: '5175efbfa3802cc4d5a5e6ed' } },\n        return_to: '/workshops' }\n\nIt's worth noting that since you can put anything you want into an anonymous session, provided you can correlate it to a user in your database on login or signup, you can start persisting info for a user even though you don't know who they are straight away. You will see some cool interactions for anonymous users on airpair.com coming in the next month or two.\n\n#### Passport also harnesses `req.session`\n\nAs you can see on line 6 in the code snippet above, using the `passport` attribute allows PassportJS to use the session object to keep track of a logged in user  associated with a given session. \n\nIt then uses the `deserializeUser` function, which receives `req.session.passport.user` as its first parameter, and as the default behavior suggested in the PassportJS documentation, makes an additional read to your persistence store to retrieve the user object associated with the userId.\n\n<!--?prettify lang=javascript linenums=false?-->\n\n    passport.serializeUser(function(user, done) {\n      done(null, user.id);\n    });\n\n    passport.deserializeUser(function(id, done) {\n      User.findById(id, function(err, user) {\n        done(err, user);\n    });\n\n### Passport `req.user`\n\n`req.user` is a PassportJS specific property that is the result of the `deserializeUser` function using the data from `req.session.passport.user`\n\n## Optimize PassportJS \n\nI realized that in the old app, we followed the default suggestion and were hitting the database twice on every single API call to populate all the user's information in memory. But in practice, we rarely needed more than the userId in our backend code. So this time around, I've made the decision to stuff the name and email into the session object and avoid making multiple database trips on every single API call. With many pages on the site making 5-10 calls to render a single page, this seemed like a cheap way to significantly reduce database load. Here's what the new app looks like:\n\n<!--?prettify lang=javascript linenums=false?-->\n\n    passport.serializeUser( (user, done) => {\n      var sessionUser = { _id: user._id, name: user.name, email: user.email, roles: user.roles }\n      done(null, sessionUser)\n    })\n\n    passport.deserializeUser( (sessionUser, done) => {\n      // The sessionUser object is different from the user mongoose collection\n      // it's actually req.session.passport.user and comes from the session collection\n      done(null, sessionUser)\n    })\n\n## Optimize ExpressJS Sessions\n\n### When are sessions created?\n\nExpress will create a new session (and write it to the database) whenever it\ndoes not detect a session cookie. As it turns out, the order in which you set the session\nmiddleware and tell Express where your static directory is has some pretty\ndramatic nuances. Here's what the new AirPair index.js looks like:\n\n<!--?prettify lang=javascript linenums=false?-->\n\n    var express = require('express')\n    var app = express()\n\t\n    //-- We don't want to serve sessions for static resources\n    //-- Save database write on every resources\n    app.use(express.static(config.appdir+'/public'))\n\n    mongo.connect()\n    session(app, mongo.initSessionStore)\n\n    //-- Do not move connect-livereload before session middleware\n    if (config.livereload) app.use(require('connect-livereload')({ port: 35729 }))\n\t\n    hbsEngine.init(app)\n    routes.init(app)\t\n    app.listen(config.port, function() {})\n\n### Avoid Sessions for Static Resources\n\nI learned that if you add the session middleware before your static directory, \nExpress will generate sessions for requests on static files like stylesheets, images, and JavaScript. \n\nIf a new visitor without a session loads a page with 10 static files, the \nclient's browser will not yet have a cookie and will send 10 cookieless requests \nall triggering Express to create sessions. Ouch! So that's what was happening... \nIf you haven't done something smart to detect bots and scrapers, things can blow\nout pretty quickly!\n\nSimply put your static files first, or better yet on a CDN that has nothing to\ndo with your Node.js app and your session collection should stay much healthier.\n\n## ExpressJS 4.0 Middleware Order\n\nThe middleware setup for ExpressJS 4.0 is quite different from ExpressJS 3.0 where everything came baked in. You now need to include each piece manually with its own NPM package. In case you want to see an up-to-date version of how each  piece is chained together, because there are many non-working legacy examples floating around, this is what I ended up with.\n\nA couple of gotchas sunk half an hour or so for me, including that Cookie Parser now requires a secret and Body Parser required and Extend Url.\n\n<!--?prettify lang=javascript linenums=false?-->\n\n    // Passport does not directly manage your session, it only uses the session.\n    // So you configure session attributes (e.g. life of your session) via express\n    var sessionOpts = {\n      saveUninitialized: true, // saved new sessions\n      resave: false, // do not automatically write to the session store\n      store: sessionStore,\n      secret: config.session.secret,\n      cookie : { httpOnly: true, maxAge: 2419200000 } // configure when sessions expires\n    }\n\n    app.use(bodyParser.json())\n    app.use(bodyParser.urlencoded({extended: true}))\n    app.use(cookieParser(config.session.secret))\n    app.use(session(sessionOpts))\n\n    app.use(passport.initialize())\n    app.use(passport.session())\n\n\n### The AHA! **live-reload** middleware\n\nSo it turns out, the problem that held me up was the position of the live-reload middleware. LiveReload injects script into every response to listen for changes emitted from the server. I don't know the exact issue, but having it before the session middleware broke the session cookie being sent correctly to the client.\n\n## Check your Middleware!\n\nI'm glad I took the time to dive deep with Express and Passport for the new \nairpair.com site. A few tweaks have lead to significantly less database traffic \nand my deepening understanding of how to utilize req.session will empower us to \nbuild some cool interactions and personalization for anonymous visitors.\n\nI highly highly recommend going through all your middleware one at a time\nto understand everything you app is doing on every request. There are many performance gains to be had when you understand things\npiece by piece.\n",
    "slug" : "expressjs-and-passportjs-sessions-deep-dive",
    "tags" : [
        {
            "slug" : "express",
            "name" : "ExpressJS",
            "_id" : ObjectId("514825fa2a26ea0200000016")
        },
        {
            "slug" : "passport",
            "name" : "passport",
            "_id" : ObjectId("5181e12e66a6f999a465f282")
        }
    ],
    "title" : "ExpressJS and PassportJS Sessions Deep Dive",
    "github" : {
        "repoInfo" : {
            "author" : "jkresner",
            "url" : "https://github.com/airpair/expressjs-and-passportjs-sessions-deep-dive",
            "owner" : "jkresner",
            "authorTeamId" : 1315283,
            "reviewTeamId" : 1315282
        }
    },
    "reviews" : [
        {
            "_id" : ObjectId("54f0d3f64499800c00f1e3b7"),
            "by" : ObjectId("54f0d3ea4499800c00f1e3b5"),
            "val" : 5,
            "said" : "+5 for disambiguation of static and session relationship! good to know",
            "replies" : [
                {
                    "_id" : ObjectId("54f18f41b2ecf40c00e2911e"),
                    "by" : "5175efbfa3802cc4d5a5e6ed",
                    "said" : "Thank you sir :)"
                }
            ],
            "votes" : [
                {
                    "_id" : ObjectId("54f0ea3f4499800c00f1e5b2"),
                    "by" : "5175efbfa3802cc4d5a5e6ed",
                    "val" : 1
                }
            ]
        },
        {
            "_id" : ObjectId("55bda4e448f26f11009ddb00"),
            "by" : ObjectId("55bda4c8cf98ed11005a928b"),
            "val" : 4,
            "said" : "Great post!"
        },
        {
            "_id" : ObjectId("55cd25de88d34e110078bb63"),
            "by" : ObjectId("54f711888438550c00e98aa0"),
            "val" : 4,
            "said" : "Sweet, we were just working on a similar stack for a ShipIt Day project so I'll be sure to go back and double check our Express config before pulling it into a release :)"
        },
        {
            "_id" : ObjectId("55cd6c8c71d6051100c3732f"),
            "by" : ObjectId("533afd421c67d1a4859d2b28"),
            "val" : 5,
            "said" : "Great job diving deep into such a seemingly mundane topic. It is a rare occurrence indeed that something like this is pursued to the point where it yields real insights, and I am very very happy that you took the time to get this insight out there for the community to share, and hopefully consume when they are building their own apps. A very interesting post."
        },
        {
            "_id" : ObjectId("55cdfbeddcb9e91100e82f0f"),
            "by" : ObjectId("532071421c67d1a4859d2755"),
            "val" : 5,
            "said" : "Good work, JK!  Timely and useful."
        },
        {
            "_id" : ObjectId("55ce6f21ef06bf11004e50b0"),
            "by" : ObjectId("527bd05966a6f999a465fb0c"),
            "val" : 5,
            "said" : "Middleware can be tricky - particularly when dealing with unique session IDs and the like. I've had my own frustrations with Express in the past, and this pretty much sums up my experience! I'm looking forward to polishing my code and fixing the issue :)"
        },
        {
            "_id" : ObjectId("55e075019f326811007955c5"),
            "by" : ObjectId("55e07499deaaba11001a8f7e"),
            "val" : 5,
            "said" : "+5 for explaining clearly something poorly documented \n(and for all the work needed to do that ;) )",
            "votes" : [
                {
                    "_id" : ObjectId("562e6f0440899311000ad0d2"),
                    "by" : ObjectId("5175efbfa3802cc4d5a5e6ed"),
                    "val" : 1
                }
            ]
        },
        {
            "_id" : ObjectId("56289a056d2109110015a3fd"),
            "by" : ObjectId("562891dac6e100110021e1c2"),
            "val" : 4,
            "said" : "Thanks for this post",
            "replies" : [
                {
                    "_id" : ObjectId("562e6eae745e3c1100c94e19"),
                    "by" : ObjectId("5175efbfa3802cc4d5a5e6ed"),
                    "said" : "Glad you liked it."
                }
            ]
        },
        {
            "_id" : ObjectId("56570c55e7164111000206f9"),
            "by" : ObjectId("5649c2a540b1891100d2f0a1"),
            "val" : 5,
            "said" : "Awsome work, very helpful!"
        },
        {
            "_id" : ObjectId("565e134998b91511002a7b8c"),
            "by" : ObjectId("564a4c3940b1891100d317ce"),
            "val" : 5,
            "said" : "good"
        },
        {
            "_id" : ObjectId("5684890196ca5311007c8b89"),
            "by" : ObjectId("568483b165dd16110077cf37"),
            "val" : 5,
            "said" : "good explaination"
        },
        {
            "_id" : ObjectId("5696546b4c61551100766ac3"),
            "by" : ObjectId("5696527fa86b0f1100f2b42e"),
            "val" : 5,
            "said" : "Excellent article!"
        },
        {
            "_id" : ObjectId("56bafd9211c28d110001dd55"),
            "by" : ObjectId("56baea25ed563e1100790f31"),
            "val" : 5,
            "said" : "Very nice article. Clears confusion related with Passport and Express session."
        },
        {
            "_id" : ObjectId("56bdbe4a9767f51100cae009"),
            "by" : ObjectId("56bdb8837e2c9a11006b4ba1"),
            "val" : 5,
            "said" : "I must say, you opened my eyes to this really confusing workflow. Now I know that req.session is populated by Express and PassportJS harnesses the content of req.session to populate req.user.  \n\nThanks for the efforts. "
        },
        {
            "_id" : ObjectId("56eb9ad8e4b981110061fb8e"),
            "by" : ObjectId("56eb9a43eeb06d110051f35a"),
            "val" : 2,
            "said" : "Too old post."
        },
        {
            "_id" : ObjectId("56f5bc5edd95791100199980"),
            "by" : ObjectId("56f5ba5bcbcb8611009d5883"),
            "val" : 1,
            "said" : "A bit miffed that the site promotes \"to help developers build ideas faster and stay un-stuck\" yet blocks code samples unless you sign in to github and give away your email."
        },
        {
            "_id" : ObjectId("5706fd9c833a431100c9a797"),
            "by" : ObjectId("5706fc76833a431100c9a794"),
            "val" : 5,
            "said" : "Very well done."
        }
    ],
    "stats" : {
        "words" : 1450,
        "shares" : 0,
        "acceptedPRs" : 0,
        "closedPRs" : 0,
        "openPRs" : 0,
        "forkers" : 2,
        "comments" : 20,
        "reviews" : 17,
        "rating" : 4.41
    },
    "forkers" : [
        {
            "_id" : ObjectId("558df2e619316a1100fcdd94"),
            "userId" : ObjectId("558dccfbf6f02b110057636a")
        },
        {
            "_id" : ObjectId("55cd0e5988d34e110078b6f8"),
            "userId" : ObjectId("54f711888438550c00e98aa0")
        }
    ],
    "htmlHead" : {
        "ogImage" : "https://cloud.githubusercontent.com/assets/979542/9256432/2ec6296a-41a4-11e5-931a-7f0bc48fe8b4.png",
        "ogDescription" : "Misunderstanding ExpressJS Sessions and how PassportJS works can lead to millions of un-necessary database reads and writes. This deep time will keep you out of trouble.",
        "description" : "Misunderstanding ExpressJS Sessions and how PassportJS works can lead to millions of un-necessary database reads and writes. This deep time will keep you out of trouble.",
        "ogUrl" : "http://www.airpair.com/express/posts/expressjs-and-passportjs-sessions-deep-dive",
        "ogVideo" : null,
        "ogTitle" : "ExpressJS and PassportJS Sessions Deep Dive",
        "ogType" : "article",
        "canonical" : "http://www.airpair.com/express/posts/expressjs-and-passportjs-sessions-deep-dive",
        "title" : "ExpressJS and PassportJS Sessions Deep Dive"
    },
    "subscribed" : [
        {
            "_id" : ObjectId("541a36c3535a850b00b05697"),
            "userId" : ObjectId("5175efbfa3802cc4d5a5e6ed"),
            "mail" : "jk@airpair.com"
        },
        {
            "_id" : ObjectId("54f0d3f64499800c00f1e3b7"),
            "userId" : ObjectId("54f0d3ea4499800c00f1e3b5"),
            "mail" : "montana.payne@jlmei.com"
        },
        {
            "_id" : ObjectId("55bda4e448f26f11009ddb00"),
            "userId" : ObjectId("55bda4c8cf98ed11005a928b"),
            "mail" : "ben@handstack.com"
        },
        {
            "_id" : ObjectId("55cd25de88d34e110078bb63"),
            "userId" : ObjectId("54f711888438550c00e98aa0"),
            "mail" : "rsmclaug@gmail.com"
        },
        {
            "_id" : ObjectId("55cd6c8c71d6051100c3732f"),
            "userId" : ObjectId("533afd421c67d1a4859d2b28"),
            "mail" : "apolishc@gmail.com"
        },
        {
            "_id" : ObjectId("55cdfbeddcb9e91100e82f0f"),
            "userId" : ObjectId("532071421c67d1a4859d2755"),
            "mail" : "rtinfow@gmail.com"
        },
        {
            "_id" : ObjectId("55ce6f21ef06bf11004e50b0"),
            "userId" : ObjectId("527bd05966a6f999a465fb0c"),
            "mail" : "eric@eam.me"
        },
        {
            "_id" : ObjectId("55e075019f326811007955c5"),
            "userId" : ObjectId("55e07499deaaba11001a8f7e"),
            "mail" : "arhuman@gmail.com"
        },
        {
            "_id" : ObjectId("56289a056d2109110015a3fd"),
            "userId" : ObjectId("562891dac6e100110021e1c2"),
            "mail" : "primary"
        },
        {
            "_id" : ObjectId("56570c55e7164111000206f9"),
            "userId" : ObjectId("5649c2a540b1891100d2f0a1"),
            "mail" : "kashaev.arthur@gmail.com"
        },
        {
            "_id" : ObjectId("565e134998b91511002a7b8c"),
            "userId" : ObjectId("564a4c3940b1891100d317ce"),
            "mail" : "merloxdixcontrol@gmail.com"
        },
        {
            "_id" : ObjectId("5684890196ca5311007c8b89"),
            "userId" : ObjectId("568483b165dd16110077cf37"),
            "mail" : "murtuzamorbi@yahoo.com"
        },
        {
            "_id" : ObjectId("5696546b4c61551100766ac3"),
            "userId" : ObjectId("5696527fa86b0f1100f2b42e"),
            "mail" : "outofservices@outlook.com"
        },
        {
            "_id" : ObjectId("56bafd9211c28d110001dd55"),
            "userId" : ObjectId("56baea25ed563e1100790f31"),
            "mail" : "pratik.sathe1987@gmail.com"
        },
        {
            "_id" : ObjectId("56bdbe4a9767f51100cae009"),
            "userId" : ObjectId("56bdb8837e2c9a11006b4ba1"),
            "mail" : "rafiullahrs@gmail.com"
        },
        {
            "_id" : ObjectId("56eb9ad8e4b981110061fb8e"),
            "userId" : ObjectId("56eb9a43eeb06d110051f35a"),
            "mail" : "prashant.sable@krixi.com"
        },
        {
            "_id" : ObjectId("56f5bc5edd95791100199980"),
            "userId" : ObjectId("56f5ba5bcbcb8611009d5883"),
            "mail" : "github@matthewboehm.com"
        },
        {
            "_id" : ObjectId("5706fd9c833a431100c9a797"),
            "userId" : ObjectId("5706fc76833a431100c9a794"),
            "mail" : "rahul.m.dhodapkar@gmail.com"
        },
        {
            "_id" : ObjectId("558df2e619316a1100fcdd94"),
            "userId" : ObjectId("558dccfbf6f02b110057636a"),
            "mail" : "yuraji@gmail.com"
        }
    ],
    "history" : {
        "created" : ISODate("2014-09-18T01:34:59.747Z"),
        "updated" : ISODate("2015-08-13T22:59:42.039Z"),
        "submitted" : ISODate("2015-02-21T00:15:35.231Z"),
        "published" : ISODate("2014-09-23T19:17:23.161Z"),
        "live" : {
            "published" : ISODate("2015-08-13T22:59:42.039Z"),
            "by" : ObjectId("5175efbfa3802cc4d5a5e6ed"),
            "commit" : "8503d290c7b4ed5e780f04f2b703eef43554b6d1"
        }
    },
    "log" : {
        "last" : {
            "action" : "propagateMDfromGithub",
            "utc" : ISODate("2015-08-13T22:59:42.039Z"),
            "by" : {
                "_id" : ObjectId("5175efbfa3802cc4d5a5e6ed"),
                "name" : "Jonathon Kresner"
            }
        },
        "history" : [
            {
                "_id" : ObjectId("54e7ce27fd5a340c005de39e"),
                "utc" : ISODate("2015-02-21T00:15:35.231Z"),
                "action" : "submittedForReview",
                "by" : {
                    "name" : "Jonathon Kresner",
                    "_id" : ObjectId("5175efbfa3802cc4d5a5e6ed")
                }
            },
            {
                "utc" : ISODate("2015-08-13T17:15:27.102Z"),
                "action" : "updateByAuthor",
                "_id" : ObjectId("55ccd0af88d34e110078a5f8"),
                "by" : {
                    "name" : "Jonathon Kresner",
                    "_id" : ObjectId("5175efbfa3802cc4d5a5e6ed")
                }
            },
            {
                "_id" : ObjectId("55ccd1f233be2d11001c83dc"),
                "action" : "updateHEAD",
                "utc" : ISODate("2015-08-13T17:20:50.953Z"),
                "by" : {
                    "_id" : ObjectId("5175efbfa3802cc4d5a5e6ed"),
                    "name" : "Jonathon Kresner"
                }
            },
            {
                "utc" : ISODate("2015-08-13T17:24:16.737Z"),
                "action" : "updateHEAD",
                "_id" : ObjectId("55ccd2c033be2d11001c840f"),
                "by" : {
                    "name" : "Jonathon Kresner",
                    "_id" : ObjectId("5175efbfa3802cc4d5a5e6ed")
                }
            },
            {
                "_id" : ObjectId("55ccd2cd33be2d11001c8412"),
                "action" : "propagateMDfromGithub",
                "utc" : ISODate("2015-08-13T17:24:29.754Z"),
                "by" : {
                    "_id" : ObjectId("5175efbfa3802cc4d5a5e6ed"),
                    "name" : "Jonathon Kresner"
                }
            },
            {
                "utc" : ISODate("2015-08-13T17:28:35.209Z"),
                "action" : "updateHEAD",
                "_id" : ObjectId("55ccd3c333be2d11001c8459"),
                "by" : {
                    "name" : "Jonathon Kresner",
                    "_id" : ObjectId("5175efbfa3802cc4d5a5e6ed")
                }
            },
            {
                "_id" : ObjectId("55ccd47888d34e110078a706"),
                "action" : "updateHEAD",
                "utc" : ISODate("2015-08-13T17:31:36.416Z"),
                "by" : {
                    "_id" : ObjectId("5175efbfa3802cc4d5a5e6ed"),
                    "name" : "Jonathon Kresner"
                }
            },
            {
                "utc" : ISODate("2015-08-13T17:31:46.836Z"),
                "action" : "propagateMDfromGithub",
                "_id" : ObjectId("55ccd48233be2d11001c8496"),
                "by" : {
                    "name" : "Jonathon Kresner",
                    "_id" : ObjectId("5175efbfa3802cc4d5a5e6ed")
                }
            },
            {
                "_id" : ObjectId("55ccd55888d34e110078a75f"),
                "action" : "updateHEAD",
                "utc" : ISODate("2015-08-13T17:35:20.314Z"),
                "by" : {
                    "_id" : ObjectId("5175efbfa3802cc4d5a5e6ed"),
                    "name" : "Jonathon Kresner"
                }
            },
            {
                "utc" : ISODate("2015-08-13T17:35:26.197Z"),
                "action" : "propagateMDfromGithub",
                "_id" : ObjectId("55ccd55e33be2d11001c84e0"),
                "by" : {
                    "name" : "Jonathon Kresner",
                    "_id" : ObjectId("5175efbfa3802cc4d5a5e6ed")
                }
            },
            {
                "_id" : ObjectId("55ccd5d088d34e110078a77f"),
                "action" : "updateHEAD",
                "utc" : ISODate("2015-08-13T17:37:20.806Z"),
                "by" : {
                    "_id" : ObjectId("5175efbfa3802cc4d5a5e6ed"),
                    "name" : "Jonathon Kresner"
                }
            },
            {
                "utc" : ISODate("2015-08-13T17:37:25.929Z"),
                "action" : "propagateMDfromGithub",
                "_id" : ObjectId("55ccd5d533be2d11001c850c"),
                "by" : {
                    "name" : "Jonathon Kresner",
                    "_id" : ObjectId("5175efbfa3802cc4d5a5e6ed")
                }
            },
            {
                "touch" : {
                    "action" : "publish",
                    "utc" : ISODate("2015-08-13T17:35:26.197Z"),
                    "by" : {
                        "_id" : ObjectId("5175efbfa3802cc4d5a5e6ed"),
                        "name" : "Jonathon Kresner"
                    }
                },
                "commit" : "65ee5930fcde844bd42563b5cf7268702ce766ec",
                "_id" : ObjectId("55ccd55e33be2d11001c84e1")
            },
            {
                "touch" : {
                    "action" : "publish",
                    "utc" : ISODate("2015-08-13T17:37:25.929Z"),
                    "by" : {
                        "_id" : ObjectId("5175efbfa3802cc4d5a5e6ed"),
                        "name" : "Jonathon Kresner"
                    }
                },
                "commit" : "6355f61f970e2059d971e9396918e34b12fa6961",
                "_id" : ObjectId("55ccd5d533be2d11001c850d")
            },
            {
                "touch" : {
                    "action" : "publish",
                    "utc" : ISODate("2015-08-13T17:40:49.063Z"),
                    "by" : {
                        "_id" : ObjectId("5175efbfa3802cc4d5a5e6ed"),
                        "name" : "Jonathon Kresner"
                    }
                },
                "commit" : "d8e9b309c58d897fe1045dd1264ceabbc30ec9ab",
                "_id" : ObjectId("55ccd6a188d34e110078a7d4")
            },
            {
                "touch" : {
                    "action" : "publish",
                    "utc" : ISODate("2015-08-13T17:53:09.871Z"),
                    "by" : {
                        "_id" : ObjectId("5175efbfa3802cc4d5a5e6ed"),
                        "name" : "Jonathon Kresner"
                    }
                },
                "commit" : "7ba7ec4d52ab700dd8a76439d76c39e48ec2af98",
                "_id" : ObjectId("55ccd98533be2d11001c8638")
            },
            {
                "touch" : {
                    "action" : "publish",
                    "utc" : ISODate("2015-08-13T17:54:32.348Z"),
                    "by" : {
                        "_id" : ObjectId("5175efbfa3802cc4d5a5e6ed"),
                        "name" : "Jonathon Kresner"
                    }
                },
                "commit" : "3a8301598d3141ce412aecb372626f01e9e463f4",
                "_id" : ObjectId("55ccd9d833be2d11001c864d")
            },
            {
                "touch" : {
                    "action" : "publish",
                    "utc" : ISODate("2015-08-13T17:57:17.516Z"),
                    "by" : {
                        "_id" : ObjectId("5175efbfa3802cc4d5a5e6ed"),
                        "name" : "Jonathon Kresner"
                    }
                },
                "commit" : "7661a82071bacd17e8e406e87b0e06e5111235af",
                "_id" : ObjectId("55ccda7d88d34e110078a8fc")
            },
            {
                "_id" : ObjectId("55cd215e33be2d11001c9838"),
                "commit" : "8503d290c7b4ed5e780f04f2b703eef43554b6d1",
                "touch" : {
                    "action" : "publish",
                    "utc" : ISODate("2015-08-13T22:59:42.038Z"),
                    "by" : {
                        "_id" : ObjectId("5175efbfa3802cc4d5a5e6ed"),
                        "name" : "Jonathon Kresner"
                    }
                }
            }
        ]
    }
  },

  logoBra: {
    _id: ObjectId("56b363115b56140b7e46129b"),
    "title" : "Don't change my logo bra",
    "tags" : [],
    "md" : "Welcome to your post. Highlighted elements are inconsistent with our [authoring guidelines](https://www.airpair.com/authoring-guide)\n\n> Posts should start with a 30-50 word `blockquote` summary. Delete the above sentence and rewrite this blockquote when know what your post is covering.\n\n## 1. AirPair Editor Tips\n\n### 1.1 The preview pane\n\nAs you make change the preview pane will update.\n\nThe longer your post, the less frequently it will refresh. To immediately show the latest changes, click anywhere - *i.e. blur* - out of the editor.\n\n### 1.2 Change, Check, Save\n\nWhen you make changes, the **SAVE** button appears.\n\nPreview how things look across different devices and if all's well, click **SAVE** to avoid loosing work.\n\n### 1.3 Guideline\n",
    "forkers" : [],
    "reviews" : [],
    history: {
      "updated" : ISODate("2016-02-04T14:41:21.000Z"),
      "created" : ISODate("2016-02-04T14:41:21.852Z"),
    },
    "log" : {
      "history" : [
        { _id: ObjectId("56b363115b56140b7e46129a"),
          "action" : "create", by: { "name" : "Jonathon Kresner", _id: ObjectId("549342348f8c80299bcc56c2") } },
        { _id: ObjectId("56b3631b5b56140b7e46129d"),
          "action" : "editDraft", by: { "name" : "Jonathon Kresner", _id: ObjectId("549342348f8c80299bcc56c2") } }
      ],
      "last" : {
        by: { "name" : "Jonathon Kresner", _id: ObjectId("549342348f8c80299bcc56c2") },
        _id: ObjectId("56b3631b5b56140b7e46129d"),
        "action" : "editDraft"
      }
    },
    by: {
      _id: ObjectId("549342348f8c80299bcc56c2"),
      "name" : "Jonathon Kresner",
      "bio" : "AirPair.com Founder",
      "avatar" : "https://avatars.githubusercontent.com/u/979542?v=3"
    },
    "stats" : { "words" : 1 }
  },



  vagrantCheat: {
    "_id" : ObjectId("56ceeb50fb20411200c2322b"),
    "title" : "Vagrant Cheatsheet",
    "md" : "\nA 3 minutes introduction to setting up your Vagrant Machine. This very short tutorial will work you through how to configure your Vagrantfile for various VM providers in the form of a cheatsheet. \n\nUninstalling Vagrant\n    - On Windows, uninstall using the add/remove programs section of the control panel.\n    - On Mac OS X, remove the /Applications/Vagrant directory and the /usr/bin/vagrant file.\n    - On Linux, remove the /opt/vagrant directory and the /usr/bin/vagrant file.\n    - On every platform, remove the ~/.vagrant.d directory to delete the user data.\n    \nNote: the ‘$’ before the commands signifies a set of commands to run on your terminal. Please, do not type ‘$’ as part of the command.\n\n‘#’ represents a comment/explanation of what the command does\n\nCommands:\n--------\n\n    $ vagrant box add NAME URL\n    $ vagrant box list\n    $ vagrant box remove NAME PROVIDER\n    $ vagrant box repackage NAME PROVIDER\n    $ vagrant box add precise32 http://files.vagrantup.com/precise32.box\n\n — -\n    # vagrant up — starts vagrant environment (also provisions only on the FIRST vagrant up)\n\n    $ vagrant up — provider=virtualbox\n    $ vagrant up — provider=vmware_fusion\n    $ vagrant up — provider=vmware_workstation\n    $ vagrant up — provider=aws\n    \n — -\n\n    # vagrant destroy — stops and deletes all traces of the vagrant machine\n    \n    $ vagrant destoy\n    $ vagrant destroy -f\n    $ vagrant destrroy — force\n    -f or — force is for : Don’t ask for confirmation before destroying.\n    \n — -\n\n# Other commands\n    $ vagrant init # Initializes the current directory to be a Vagrant environment by creating an initial Vagrantfile if one doesn’t already exist\n    \n    $ vagrant status — outputs status of the vagrant machine\n    \n    $ vagrant reload — restarts vagrant machine, loads new Vagrantfile configuration\n    \n    $ vagrant provision — forces reprovisioning of the vagrant machine\n\n# Tips\n\n    $ vagrant -v — Get the vagrant version\n    $ vagrant global-status — outputs status of all vagrant machines\n    $ vagrant suspend — Suspends a virtual machine (remembers state)\n    $ vagrant resume — Resume a suspended machine (vagrant up works just fine for this as well)\n    $ vagrant push — Yes, vagrant can be configured to deploy code!\n    $ vagrant up — provision | tee provision.log — Runs vagrant up, forces provisioning and logs all output to a file\n    \n — -\n\n    # vagrant halt — stops the vagrant machine\n    $ vagrant halt\n    $ vagrant halt -f\n    $ vagrant halt — force\n    -f or — force is for : Don’t attempt to gracefully shut down the machine. Pull out the power cord.\n    \n — -\n\n    # If a first argument is given, it will prepopulate the config.vm.box setting in the created Vagrantfile.\n    # If a second argument is given, it will prepopulate the config.vm.box_url setting in the created Vagrantfile.\n    \n    $ vagrant init [box-name] [box-url]\n    \n — -\n\n    $ vagrant package\n    \n    — base NAME — Instead of packaging a VirtualBox machine that Vagrant manages, this will package a VirtualBox machine that VirtualBox manages. NAME should be the name or UUID of the machine from the VirtualBox GUI.\n    — output NAME — The resulting package will be saved as NAME. By default, it will be saved as package.box.\n    — include x,y,z — Additional files will be packaged with the box. These can be used by a packaged Vagrantfile (documented below) to perform additional tasks.\n    — vagrantfile FILE — Packages a Vagrantfile with the box, that is loaded as part of the Vagrantfile load order when the resulting box is used.\n    \n — -\n\n    $ vagrant plugin\n    $ vagrant plugin install\n    $ vagrant plugin license\n    $ vagrant plugin list\n    $ vagrant plugin uninstall\n    \n — -\n\n    # vagrant provision — debug — Use the debug flag to increase the verbosity of the output\n    $ vagrant provision — provision-with x,y,z\n    This will only run the given provisioners. For example, if you have a :shell and :chef_solo provisioner and run vagrant provision — provision-with shell, only the shell provisioner will be run.\n    \n — -\n\n    # vagrant reload — provision — Restart the virtual machine and force provisioning\n    $ vagrant reload\n    — no-provision — The provisioners will not run.\n    — provision-with x,y,z — This will only run the given provisioners. For example, if you have a :shell and :chef_solo provisioner and run vagrant provision — provision-with shell, only the shell provisioner will be run.\n    \n — -\n\n    # vagrant ssh — connects to machine via SSH\n    $ vagrant ssh\n    -c COMMAND or — command COMMAND — This executes a single SSH command, prints out the stdout and stderr, and exits.\n    -p or — plain — This does an SSH without authentication, leaving authentication up to the user.\n    \n — -\n\n    $ vagrant ssh-config\n    This will output valid configuration for an SSH config file to SSH into the running Vagrant machine from ssh directly (instead of using vagrant ssh).\n    — host NAME — Name of the host for the outputted configuration.\n    \n — -\n\nPath\n----\n\nif vagrant is run in `/home/path/to/foo`, it will search the following paths in order for a Vagrantfile, until it finds one:\n\n    /home/path/to/foo/Vagrantfile\n    /home/path/to/Vagrantfile\n    /home/path/Vagrantfile\n    /home/Vagrantfile\n    /Vagrantfile\n    VAGRANT_CWD # environment variable to set the starting directory where Vagrant looks for a Vagrantfile\n\nConfigs\n---------\n\nVagrantFile Configs\n\n    Vagrant.configure(“2”) do |config| config.vm.box = “precise32”\n    end\n# Load order of Vagrantfile (newest overrides the older ones)\n    1. Built-in default Vagrantfile that ships with Vagrant. This has default settings\n    2. Vagrantfile packaged with the box that is to be used for a given machine.\n    3. Vagrantfile in your Vagrant home directory (defaults to ~/.vagrant.d). This lets you specify some defaults for your system user\n    4. Vagrantfile from the project directory. This is the Vagrantfile that you’ll be modifying most of the time.\n    \n# Machine Settings\n\n    - config.vm.box — This configures what box the machine will be brought up against. The value here should match one of the installed boxes on the system.\n    - config.vm.box_url — The URL that the configured box can be found at. If the box is not installed on the system, it will be retrieved from this URL when vagrant up is run.\n    - config.vm.graceful_halt_retry_count — The number of times to retry gracefully shutting down the system when vagrant halt is called. Defaults to 3.\n    - config.vm.graceful_halt_retry_interval — The amount of time in between each retry of attempting to shut down, in seconds. Defaults to 1 second.\n    - config.vm.guest — The guest OS that will be running within this machine. This defaults to :linux, and Vagrant will auto-detect the proper distro. Vagrant needs to know this information to perform some guest OS-specific things such as mounting folders and configuring networks.\n    - config.vm.hostname — The hostname the machine should have. Defaults to nil. If nil, Vagrant won’t manage the hostname. If set to a string, the hostname will be set on boot.\n    - config.vm.network — Configures networks on the machine.\n    - config.vm.provider — Configures provider-specific configuration, which is used to modify settings which are specific to a certain provider. If the provider you’re configuring doesn’t exist or is not setup on the system of the person who runs vagrant up, Vagrant will ignore this configuration block. This allows a Vagrantfile that is configured for many providers to be shared among a group of people who may not have all the same providers installed.\n    - config.vm.provision — Configures provisioners on the machine, so that software can be automatically installed and configured when the machine is created.\n    - config.vm.synced_folder — Configures synced folders on the machine, so that folders on your host machine can be synced to and from the guest machine.\n    - config.vm.usable_port_range — A range of ports Vagrant can use for handling port collisions and such. Defaults to 2200..2250.\n    SSH Settings\n    - config.ssh.default.host — This sets the default host that Vagrant will use for SSH. This is not set by default because the providers usually detect the proper host. Provider-detected hosts will override this. To force a certain host, use config.ssh.host.\n    - config.ssh.default.port — This sets the default port that Vagrant will use to connect to the machine via SSH. This is not set by default because the providers usually detect the proper port. Provider-detected ports will override this. To force a certain port, use config.ssh.port.\n    - config.ssh.default.private_key_path — This sets the default private key to use for authenticating with SSH. By default this is set to the insecure private key that ships with Vagrant, since that is what most public boxes use. A provider-detected private key will override this setting. To force a certain private key, use config.ssh.private_key_path. The private key format should be an OpenSSH private key format (as opposed to PuTTY keys and such).\n    - config.ssh.default.username — This sets the default username that Vagrant will SSH as, if no other username can be detected. This is set to “vagrant” by default, since that is what most public boxes use. Alternate providers may detect alternate usernames though, in which case this will be overriden. To force a certain username, use config.ssh.username.\n    - config.ssh.host — The same as config.ssh.default.host, except this will override any detected host and will always be used.\n    - config.ssh.port — The same as config.ssh.default.port, except this will override any detected port and will always be used.\n    - config.ssh.private_key_path — The same as config.ssh.default.private_key_path, except this will override any detected private key and will always be used.\n    - config.ssh.username — The same as config.ssh.default.username, except this will override any detected username and will always be used.\n    - config.ssh.guest_port — The port on the guest that SSH is running on. This is used by some providers to detect forwarded ports for SSH. For example, if this is set to 22 (the default), and Vagrant detects a forwarded port to port 22 on the guest from port 4567 on the host, Vagrant will attempt to use port 4567 to talk to the guest if there is no other option.\n    - config.ssh.keep_alive — If true, a “keep-alive” packet will be sent every 5 seconds on the SSH connection. This avoids the connection closing on long-running tasks. This defaults to true.\n    - config.ssh.max_tries — Maximum attempts to SSH while waiting for the machine to boot. Default is 100.\n    - config.ssh.timeout — Maximum time to wait while attempting to make a single connection via SSH before timing out. Default is 30 seconds.\n    - config.ssh.forward_agent — If true, agent forwarding over SSH connections is enabled. Defaults to false.\n    - config.ssh.forward_x11 — If true, X11 forwarding over SSH connections is enabled. Defaults to false.\n    - config.ssh.shell — The shell to use when executing SSH commands from Vagrant. By default this is bash -l. Note that this has no effect on the shell you get when you run vagrant ssh. This configuration option only affects the shell to use when executing commands internally in Vagrant.\n\n    \n    \n# Vagrant Settings\n    config.vagrant.host — This sets the type of host machine that is running Vagrant. By default this is :detect, which causes Vagrant to auto-detect the host. Vagrant needs to know this information in order to perform some host-specific things, such as preparing NFS folders if they’re enabled. You should only manually set this if auto-detection fails.\n    \n    \n    \n# Provider Settings\n    - Multiple config.vm.provider blocks can exist to configure multiple providers.\n\n    Vagrant.configure(“2”) do |config| # … (other config)\n    config.vm.provider :virtualbox do |vb| vb.customize [“modifyvm”, :id, “ — cpuexecutioncap”, “50”] end\n    end\n    \n\n\nVirtualBox configuration\n------------------------\n\n# Enable GUI\n\n\n\n    config.vm.provider “virtualbox” do |v| v.gui = true\n    end\n    \n\n\n# Virtual Machine Name\n\n\n\n    config.vm.provider “virtualbox” do |v| v.name = “my_vm”\n    end \n\n\n\n# Customization\n\nThe following settings are in compliance with VBOXMANAGE (http://www.virtualbox.org/manual/ch08.html)\n\n\n\n    config.vm.provider “virtualbox” do |v| v.customize [“modifyvm”, :id, “ — cpuexecutioncap”, “50”]\n    end\n      \n\n\nVMWare Fusion/workstation configuration\n---------------------------------------\n\n# Installation\n\n\n    $ vagrant plugin install vagrant-vmware-fusion\n    …\n    $ vagrant plugin license vagrant-vmware-fusion license.lic\n    …\n    \n\n\nCustom VMware install location (VAGRANT_VMWARE_FUSION_APP environment variable)\n-------------------------------------------------------------------------------\n\n\n    $ export VAGRANT_VMWARE_FUSION_APP=”/Apps/VMware Fusion.app”\n    $ vagrant up — provider=vmware_fusion\n\n\n# Enable GUI\n\n\n    config.vm.provider “vmware_fusion” do |v| v.gui = true\n    end\n\n\n\nVMX customization\n-----------------\n\n    config.vm.provider “vmware_fusion” do |v| v.vmx[“custom-key”] = “value” v.vmx[“another-key”] = nil\n    end\n    \n\nSynced Folders\n--------------\n\n    - By default Vagrant shares the project directory (the one with VagrantFile) to the /vagrant directory on guest machine.\n    - Any file created in /vagrant on the guest machine is automatically copied to the project directory\n    \nConfiguring\n-----------\n\n\n    Vagrant.configure(“2”) do |config| # other config here\n    config.vm.synced_folder “src/”, “/srv/website”\n    end\n\n# Disabling synced folders\n\n    Vagrant.configure(“2”) do |config| config.vm.synced_folder “src/”, “/srv/website”, disabled: true\n    end\n\n# NFS Sharing\n\n    - must have nfsd installed on the host machine\n    - during vagrant up sequence user may be prompted for administrative privileges to host machine (via sudo program)\n\n    Vagrant.configure(“2”) do |config| # … config.vm.synced_folder “.”, “/vagrant”, :nfs => true\n    end\n\n# Automated Provisioning\n\n    - run a by default shell script bootstrap.sh\n    External Scripts\n\n    Vagrant.configure(“2”) do |config| config.vm.box = “precise32” config.vm.provision :shell, :path => “bootstrap.sh”\n    end\n\nHope this helps. Checkout some of my Opensource projects on [GITHUB](http://github.com/ojeng) and [my blog](https://medium.com/@ojengwa).",
    "github" : {
      "repoInfo" : {
        "authorTeamId" : "1938751",
        "url" : "https://github.com/airpair/vagrant-cheatsheet",
        "authorTeamName" : "vagrant-cheatsheet-00c2322b-author",
        "author" : "ojengwa"
      }
    },
    "forkers" : [],
    "reviews" : [],
    "log" : {
        "last" : {
            "by" : {
                "name" : "Bernard Ojengwa",
                "_id" : ObjectId("546479888f8c80299bcc5016")
            },
            "utc" : ISODate("2016-02-25T12:26:08.447Z"),
            "_id" : ObjectId("56cef2e0fb20411200c23232"),
            "action" : "submit"
        },
        "history" : [
            {
                "action" : "create",
                "_id" : ObjectId("56ceeb50fb20411200c2322a"),
                "by" : {
                    "_id" : ObjectId("546479888f8c80299bcc5016"),
                    "name" : "Bernard Ojengwa"
                }
            },
            {
                "action" : "editDraft",
                "_id" : ObjectId("56cef086fb20411200c2322d"),
                "by" : {
                    "_id" : ObjectId("546479888f8c80299bcc5016"),
                    "name" : "Bernard Ojengwa"
                }
            },
            {
                "_id" : ObjectId("56cef2e0fb20411200c23232"),
                "action" : "submit",
                "by" : {
                    "name" : "Bernard Ojengwa",
                    "_id" : ObjectId("546479888f8c80299bcc5016")
                }
            }
        ]
    },
    "tags" : [
        {
            "sort" : 0,
            "_id" : ObjectId("5358c8081c67d1a4859d2f18")
        },
        {
            "sort" : 1,
            "_id" : ObjectId("51f7e26566a6f999a465f4b6")
        },
        {
            "sort" : 2,
            "_id" : ObjectId("5181d0ad66a6f999a465f1bb")
        },
        {
            "sort" : 3,
            "_id" : ObjectId("5249f4d266a6f999a465f897")
        },
        {
            "sort" : 4,
            "_id" : ObjectId("518962be66a6f999a465f2bd")
        },
        {
            "sort" : 5,
            "_id" : ObjectId("5181d0ad66a6f999a465f150")
        },
        {
            "sort" : 6,
            "_id" : ObjectId("5181d0a966a6f999a465ebfc")
        }
    ],
    "by" : {
      "_id" : ObjectId("546479888f8c80299bcc5016"),
      "name" : "Bernard Ojengwa",
      "email" : "bernardojengwa@gmail.com",
      "avatar" : "https://avatars.githubusercontent.com/u/3935007?v=3",
      "links" : {
        "ap" : "bernard",
        "gh" : "ojengwa",
        "so" : "http://stackoverflow.com/users/4080644/bernard-ojengwa",
        "bb" : null,
        "in" : "bmRu2CiLZu",
        "tw" : "ojengwa_",
        "gp" : "110853644319668975007"
      }
    },
    "stats" : { "words" : 2023 },
    "assetUrl" : "https://camo.githubusercontent.com/51b172d944dd3848632774f14a6c02a6feae467b/687474703a2f2f6572696b6168656964692e636f6d2f7468656d652f6661746361747a2f696d616765732f76616772616e742f6c6f676f5f76616772616e742e706e67",
    "slug" : "vagrant-cheatsheet",
    "htmlHead" : {
      "ogImage" : "https://camo.githubusercontent.com/51b172d944dd3848632774f14a6c02a6feae467b/687474703a2f2f6572696b6168656964692e636f6d2f7468656d652f6661746361747a2f696d616765732f76616772616e742f6c6f676f5f76616772616e742e706e67"
    },
    "history" : {
      "created" : ISODate("2016-02-25T11:53:52.002Z"),
      "updated" : ISODate("2016-02-25T11:53:52.000Z"),
      "submitted" : ISODate("2016-02-25T12:26:08.411Z")
    }
  },


  jscomp: `<style>
.note {
  background-color: #eee;
  padding: 20px;
  border-left: 6px solid #CE5323;
  margin: 20px 0;
  max-width: 640px; }

.note span {
  font-weight: normal;
  color: #999; }


.tut-table {
  border-collapse: collapse;
  border-spacing: 0;
  empty-cells: show;
  border: 1px solid #cbcbcb;
  margin-bottom: 1.563rem; }

.tut-table caption {
  color: #000;
  font: italic 85%/1 arial, sans-serif;
  padding: 1em 0;
  text-align: center; }

.tut-table td,
.tut-table th {
  border-left: 1px solid #cbcbcb;
  /*  inner column border */
  border-width: 0 0 0 1px;
  font-size: inherit;
  margin: 0;
  overflow: visible;
  /*to make ths where the title is really long work*/
  padding: 0.5em 1em;
  /* cell padding */ }

.tut-table td:first-child,
.tut-table th:first-child {
  border-left-width: 0; }

.tut-table thead {
  background: #f5f2f0;
  color: #000;
  text-align: left;
  vertical-align: bottom; }

/*
striping:
   even - #fff (white)
   odd  - #f5f2f0 (light gray)
*/
.tut-table td {
  background-color: transparent; }

.tut-table-odd td {
  background-color: #f5f2f0; }

/* nth-child selector for modern browsers */
.tut-table-striped tr:nth-child(2n-1) td {
  background-color: #f5f2f0; }

/* BORDERED TABLES */
.tut-table-bordered td {
  border-bottom: 1px solid #cbcbcb; }

.tut-table-bordered tbody > tr:last-child td,
.tut-table-horizontal tbody > tr:last-child td {
  border-bottom-width: 0; }

/* HORIZONTAL BORDERED TABLES */
.tut-table-horizontal td,
.tut-table-horizontal th {
  border-width: 0 0 1px 0;
  border-bottom: 1px solid #cbcbcb; }

.tut-table-horizontal tbody > tr:last-child td {
  border-bottom-width: 0; }
</style>

## 1 Introduction

In this article we are going to compare three popular MV* frameworks for the web: AngularJS vs. Backbone vs. Ember. Choosing the right framework for your project can have a huge impact on your ability to deliver on time, and your ability to maintain your code in the future. You probably want a solid, stable and proven framework to build upon, but don't want to be limited by your choice. The web is evolving fast &mdash; new technologies arise, and old methodologies quickly become irrelevant. Under this light, we are going to go through an in-depth comparison of the three frameworks.

##2  Meet The Frameworks

All the frameworks we are going to meet today have a lot in common: they are open-sourced, released under the permissive MIT license, and try to solve the problem of creating Single Page Web Applications using the MV* design pattern. They all have the concept of views, events, data models and routing. We are going to start with some quick background and history, and then dive in to compare the three frameworks.

AngularJS was born in 2009 as a part of a larger commercial product, called GetAngular. Shortly after, Misko Hevery, one of the engineers who founded GetAngular, managed to recreate a web application that consisted of 17 thousand lines of code and took 6 months to develop in a mere 3 weeks using just GetAngular. Reducing the size of the application to just about 1,000 lines of code convinced Google to start sponsoring the project, turning it into the open-source AngularJS we know today. Amongst Angular's unique and innovative features are two-way data bindings, dependency injection, easy-to-test code and extending the HTML dialect by using directives.

Backbone.js is a lightweight MVC framework. Born in 2010, it quickly grew popular as a lean alternative to heavy, full-featured MVC frameworks such as ExtJS. This resulted in many services adopting it, including Pinterest, Flixster, AirBNB and others.

Ember's roots go way back to 2007. Starting its life as the SproutCore MVC framework, originally developed by SproutIt and later by Apple, it was forked in 2011 by Yehuda Katz, a core contributor to the popular jQuery and Ruby on Rails projects. Notable Ember users include Yahoo!, Groupon, and ZenDesk.

##3 Community

Community is one of the most important factors to consider when choosing a framework. A large community means more questions answered, more third-party modules, more YouTube tutorials&hellip;you get the point. I have put together a table with the numbers, as of June 30, 2015. Angular is definitely the winner here, being the 3rd most-starred project on GitHub and having more questions on StackOverflow than Ember and Backbone combined, as you can see below:

  <table class="tut-table tut-table-bordered">
    <thead>
      <tr>
        <th>Metric</th>
        <th>AngularJS</th>
        <th>Backbone.js</th>
        <th>Ember.js</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Stars on Github</td>
        <td>40.2k</td>
        <td>18.8k</td>
        <td>14.1k</td>
      </tr>
      <tr>
        <td>Third-Party Modules</td>
        <td>1488 <a href="//ngmodules.org">ngmodules</a></td>
        <td>256 <a href="//backplug.io/">backplugs</a></td>
        <td>1155 <a href="//emberaddons.com/">emberaddons</a></td>
      </tr>
      <tr>
        <td>StackOverflow Questions</td>
        <td>104k</td>
        <td>18.2k</td>
        <td>15.7k</td>
      </tr>
      <tr>
        <td>YouTube Results</td>
        <td>~93k</td>
        <td>~10.6k</td>
        <td>~9.1k</td>
      </tr>
      <tr>
        <td>GitHub Contributors</td>
        <td>96</td>
        <td>265</td>
        <td>501</td>
      </tr>
      <tr>
        <td>Chrome Extension Users</td>
        <td>275k</td>
        <td>15.6k</td>
        <td>66k</td>
      </tr>
      <tr>
        <td>Open Issues</td>
        <td>922</td>
        <td>13</td>
        <td>413</td>
      </tr>
      <tr>
        <td>Closed Issues</td>
        <td>5,520</td>
        <td>2,062</td>
        <td>3,350</td>
      </tr>
    </tbody>
  </table>

All those metrics, however, merely show the current state of each framework. It is also interesting to see which framework has a faster-growing popularity. Fortunately, using Google Trends we can get an answer for that too:

<iframe scrolling="no" style="border:none;" width="640" height="330" src="//www.google.com/trends/fetchComponent?hl=en-US&q=ember.js,+angularjs,+backbone.js&cmpt=q&content=1&cid=TIMESERIES_GRAPH_0&export=5&w=640&h=330"></iframe>

##4 Framework Size

Page load times are crucial for the success of your web site. Users [do not exhibit much patience](//www.fastcompany.com/1825005/how-one-second-could-cost-amazon-16-billion-sales) when it comes to the speed of browsing &mdash; so in many cases it is desired to do everything possible to make your application load as fast as possible. There are two factors to look at when considering the impact of the framework on the loading time of your application: framework size and the time it takes the framework to bootstrap.

Javascript assets are usually served minified and gzipped, so we are going to compare the size of the minified-gzipped versions. However, merely looking at the framework is not enough. Backbone.js, despite being the smallest (only 6.5kb), requires both Underscore.js (5kb) and jQuery (32kb) or Zepto (9.1kb), and you will probably need to add some third party plug-ins to the mix.

  <table class="tut-table tut-table-bordered">
    <thead>
      <tr>
        <th>Framework</th>
        <th>Net Size</th>
        <th>Size with required dependencies</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>AngularJS 1.2.22</td>
        <td>39.5kb</td>
        <td>39.5kb</td>
      </tr>
      <tr>
        <td>Backbone.js 1.1.2</td>
        <td>6.5kb</td>
        <td>43.5kb (jQuery + Underscore)<br />
          20.6kb (Zepto + Underscore)
        </td>
      </tr>
      <tr>
        <td>Ember.js 1.6.1</td>
        <td>90kb</td>
        <td>136.2kb (jQuery + Handlebars)</td>
      </tr>
    </tbody>
  </table>

##5 Templating

Angular and Ember include a template engine. Backbone, on the other hand, leaves it up to you to use the template engine of your choice. The best way to get a feeling of the different templating engines is a code sample, so let's dive in. We will show an example of formatting a list of items as HTML.

###5.1 AngularJS

Angular's Templating engine is simply HTML with binding expressions baked-in. Binding expressions are surrounded by double curly braces:

<!--code lang=javascript linenums=true-->

  <ul>
    <li ng-repeat="framework in frameworks" title="{{framework.description}}">
                      {{framework.name}}
    </li>
  </ul>


###5.2 Backbone.js

While Backbone can be integrated with many third-party template engines, the default choice is [Underscore templates](//underscorejs.org/#template). Since Underscore is a Backbone dependency and you already have it on your page, you can easily take advantage of its templating engine without adding any additional dependencies for your application. On the downside, the templating engine of Underscore is very basic and you usually have to throw javascript into the mix, as you can see in our example:

<!--code lang=javascript linenums=true-->

  <ul>
    <% _.each(frameworks, function(framework) { %>
      <li title="<%- framework.description %>">
        <%- framework.name %>
      </li>
    <% }); %>
  </ul>


###5.3 Ember.js

Ember currently uses the Handlebars template engine, which is an extension to the [popular](https://github.com/mustache/mustache/wiki/Other-Mustache-implementations%20) Mustache templating engine. A new Handlebars variant, called HTMLBars is currently in the works. Handlebars does not understand DOM - all it does is a simple string transformation. HTMLBars will understand DOM, so the variable interpolation will be context aware. As HTMLBars is still not production-ready, we will show the Handlebars way of printing the framework list:

<!--code lang=javascript linenums=true-->

  <ul>
    {{#each frameworks}}
      <li {{bind-attr title=description}}>
        {{name}}
      </li>
    {{/each}}
  </ul>


##6 AngularJS
###6.1 The Good Parts

Angular has brought many innovative concepts to the world of web developers. Two-way data binding saves a lot of boilerplate code. Consider the following jQuery code snippet:

<!--code lang=javascript linenums=true-->

  $('#greet-form input.user-name').on('value', function() {
    $('#greet-form div.user-name').text('Hello ' + this.val() + '!');
  });


Thanks to Angular's two-way-binding, you never have to write this code yourself. Rather, you just declare the bindings in your HTML template:

<!--code lang=javascript linenums=true-->

    <input ng-model="user.name" type="text" />
    Hello {{user.name}}!


Promises play a main role in the Angular cast. Javascript is a single-thread, event-loop based language, which implies that many operations (such as network communication) happen in an asynchronous manner. Asynchronous javascript code tends to grow quickly into a spaghetti of nested callbacks, better recognized as "Pyramid Code" or "Callback Hell."

Not only does Angular have the largest community and much more online content than the two others, it is also backed and promoted by Google. As such, the core team is constantly growing, resulting in innovation and tools that improve developer productivity: Protractor, Batarang, ngmin and Zone.js, just to name a few. In addition, the team collaborates with the community on the design decisions. For example, all the design documents for Angular 2.0 can be found [here](https://drive.google.com/drive/#folders/0B7Ovm8bUYiUDR29iSkEyMk5pVUk), and everyone can make suggestions directly to the design documents.

Angular helps you categorize your application building blocks into several types: Controllers, Directives, Factories, Filters, Services and Views (templates). Those are organized in turn into modules, which can depend one upon the other. Each type of building block has a different role. Views do the UI, Controllers work out the logic behind the UI, Services take care of communication with the backend and hold together pieces of common and related functionality, while Directives make it easy to create reusable components and extending HTML by defining new elements, attributes and behaviors.

The automatic Dirty Checking means that you don't have to access your model data with getters and setters — you can modify any property of an arbitrary scope object and angular will automatically detect the change and notify all the watchers for that property.

"Angular is written with testability in mind." This quote from the [unit-testing guide](https://drive.google.com/drive/#folders/0B7Ovm8bUYiUDR29iSkEyMk5pVUk) has a lot behind it - Angular indeed puts a lot of emphasis on separation of concerns, unit isolation and provides ready-to-use, powerful mocks for fundamental built-in services such as [$http](https://docs.angularjs.org/api/ngMock/service/$httpBackend) and [$timeout](https://docs.angularjs.org/api/ngMock/service/$timeout).


###6.2 Pain Points

Angular is often criticized for the complexity of the Directives API. Transclusion, in particular, is a concept which confuses many developers and wrapping your head around all the concepts such as compiling function, pre/post linking functions, the different scope kinds (transclusion/isolate/child scope) and all the other configuration settings for directives takes some time to master.

The scope hierarchy in Angular uses Prototypal Inheritance, which is a new concept to grasp for people coming from Object Oriented languages such as Java and C#. Failing to understand scope inheritance causes many cases of frustrated developers (examples: [here](http://stackoverflow.com/questions/12618342/ng-model-does-not-update-controller-value), [here](http://stackoverflow.com/questions/19310129/ng-model-no-longer-updates-after-typing-into-text-input) and [here](http://stackoverflow.com/questions/19408883/angularjs-select-not-2-way-binding-to-model)).

[Angular Expressions](https://docs.angularjs.org/guide/expression) are used extensively in the View layer of Angular. This expression language is very powerful, sometimes too powerful. It lets the developer use complicated logic and even perform assignment operations and calculations, all inside the view templates. Putting logic inside the templates makes it harder to test, as it becomes impossible to test it in isolation.  Consider the following code example, which clearly shows how easily the template language can be abused:

<!--code lang=markup linenums=true-->

    <button ng-click="(oldPassword && checkComplexity(newPassword) && oldPassword != newPassword) ? (changePassword(oldPassword, newPassword) && (oldPassword=(newPassword=''))) : (errorMessage='Please input a new password matching the following requirements: ' + passwordRequirements)">Click me</button>

In many cases, mistakes such as misspelling a directive name or calling an undefined scope function are silently ignored and can be challenging to find, especially when you throw into the mix the complexity of the directive API and the scope inheritance mentioned above. I have seen developers spending hours scratching their head trying to figure out why an event binding didn't fire the callback function on the scope, only to find out they have used the camelCase convention instead of the hyphen-separated one when spelling attribute names (example [here](http://stackoverflow.com/questions/16028594/angular-scope-confusion/16028814)).

Finally, the Digest Cycle of angular, which takes care of the "Magical" dirty checking, has the tendency to surprise developers. It is easy to forget to call $digest() when running in non-Angular context ([example](http://stackoverflow.com/questions/22726790/angularjs-variable-not-updating)). On the other hand, you have to be very careful not to cause slow watches or infinite digest loops (examples: [here](http://stackoverflow.com/questions/24592283/angular-infinite-digest-loop), [here](http://stackoverflow.com/questions/23684711/infdig-infinite-digest-loop) and [here](http://stackoverflow.com/questions/21322755/tracking-down-infinite-digest-errors)). In general, for pages with a lot of interactive elements, Angular becomes really slow. A good rule of thumb is not to have more than 2,000 active bindings on the same page.

##7 Backbone.js
###7.1 The Good Parts

Backbone is lightweight, fast and has a small memory footprint. The learning curve is very linear, and there are only a few simple concepts to grasp (Models/Collections, Views, Routes). It has great documentation, the code is simple and heavily documented, and there is even an [annotated version](http://backbonejs.org/docs/backbone.html) of the code which explains how it works in detail. You can actually go over the entire source code of the framework and get familiar with it in less than an hour.

Being so small and basic, Backbone can be a good foundation to build your own framework upon. Some examples of 3rd party frameworks based on Backbone are Aura, Backbone UI, Chaplin, Geppetto, Marionette, LayoutManager, Thorax, Vertebrae. With Angular and Ember you usually have to live with the choices made by the authors of the frameworks, which may or may not suit your project needs and personal style. Angular 2.0 promises to change it, by comprising small independent modules, so you will be able to pick and mix. We are yet to see if they will be able to deliver this.

###7.2 Pain Points

Backbone does not provide structure. It rather provides some basic tools you can use to create structure, leaving it up to the developer to decide how to structure his application, and there are also many blanks to fill. Things such as memory management have to be carefully considered. The lack of view lifecycle management makes route/state changes prone to memory leaks unless you take care of cleaning up everything yourself.

While it is true that many of the functions not provided by Backbone itself could be filled by third-party plugins, this also means that there are many choices to be made when creating an application, as many functions have several alternative plugins. For example, nested models can be provided by Backbone.DocumentModel, BackBone.NestedTypes, Backbone.Schema, Backbone-Nested, backbone-nestify, just to name a few. Deciding which one is the best for your project requires research, which in turn takes time &mdash; and one of the main purposes of framework is to save you time.

Backbone lacks support for two-way data binding, meaning you will have to write a lot of boilerplate to update the view whenever your model changes, and to update your model whenever the view changes. See the example given above, showing how two-way in Angular.js data binding reduces boilerplate.

Views in Backbone manipulate the DOM directly, making them really hard to unit-test, more fragile and less reusable. The common practice is to look up DOM elements using CSS selectors, so changing a CSS class name, adding a new element with the same class name or even wrapping some DOM tree inside another element can break your CSS selectors and render your app unusable.

##8 Ember.js
###8.1 The Good Parts
Ember.js favors Convention over Configuration. This means that instead of writing a lot of boilerplate code, Ember can automatically infer much of the configuration itself, such as automatically determining the name of the route and the controller when defining a router resource. Ember even raises the bar by automatically creating the controller for your resource if you don't define one yourself.

Ember includes both an excellent router and an optional data layer, called ember data. Unlike the two other frameworks, which have a very minimal data layer (Backbone's Collection/Model and Angular's $resource), Ember comes out of the box with a fully-fledged data module which integrates really nicely with a Ruby-on-Rails backend or any other RESTful JSON API that follows a simple set of conventions. It also provides support for [setting up fixtures](http://emberjs.com/guides/models/the-fixture-adapter/) for developing against mock API and testing.

Performance has been a major goal in the design of Ember.js. Concepts such as [The Run Loop](http://emberjs.com/guides/understanding-ember/run-loop/), which ensures that updated data only causes a single DOM update even if the same piece of data was updated several times, along with [caching of computed properties](http://emberjs.com/api/classes/Ember.ComputedProperty.html), and the ability to precompile the HandleBars templates during the build time or on your server, help to keep your application load and run fast.

###8.2 Pain Points

Ember's API changed much before it stabilized. Therefore, there is a lot of outdated content and examples that no longer work, making it confusing for developers who are making their first steps in the framework. Take a look at the [Ember Data Changelog](https://github.com/emberjs/data/blob/master/TRANSITION.md), and you will see what I mean. There are so many breaking changes, and those cause many StackOverflow answers and coding tutorials to become irrelevant (example [here)](http://stackoverflow.com/a/14456916/830623).

Handlebars pollutes the DOM with many <script> tags which it uses as markers to [keep the templates up to date](http://emberjs.com/guides/understanding-ember/keeping-templates-up-to-date/) with your model. This will be gone with the transition to HTMLBars, but for the time being, your DOM tree will be filled up with so many <script> tags you will [barely be able to recognize](http://colynb.com/posts/dom-horror-with-emberjs.html) your own code. And the worst part - this can also [break your CSS styling](https://github.com/emberjs/ember.js/issues/1893) or integration with other frameworks, such as [jQuery UI's Sortable](http://stackoverflow.com/questions/11748164/ember-js-and-jquery-sortable-how-to-work-around-the-metamorph-scripts).

##9 Summary

We have seen the strengths and weaknesses of all the three frameworks. Ember's holistic approach which embraces MVC structure will make a lot of sense for developers who have a MVC programming background in Ruby, Python, Java, C# or any other Object Oriented language. Ember also brings application performance to the table,  and excels at saving you from writing boilerplate by favoring convention over configuration.

Backbone embraces minimalism. It is small, fast and easy to learn, and provides the minimum (or in many cases, even less than the minimum) that you need to get going.

Angular's innovative approach for extending HTML will make a lot of sense for people who are web developers in soul. With a large community and Google behind it, it is here to stay and grow, and it works well both for quick prototyping projects and large-scale production applications.

CREDITS: Many thanks to Oren Rubin, Shai Reznik and Leon Fedotov who helped with this post.

<div class="note"><span>CREDITS:</span> Many thanks to Oren Rubin, Shai Reznik and Leon Fedotov who helped with this post.</div>`


}
