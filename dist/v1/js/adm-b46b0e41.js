(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";require("./../common/directives/post.js"),require("./../common/directives/tagInput.js"),require("./../common/filters/filters.js"),require("./../common/models/postsService.js"),require("./../common/models/sessionService.js"),require("./../common/models/adminDataService.js"),require("./../adm/posts/module.js"),require("./../adm/users/module.js"),require("./../adm/redirects/module.js"),angular.module("ADM",["ngRoute","APSvcSession","ADMPosts","ADMUsers","ADMRedirects"]).config(["$locationProvider","$routeProvider",function(e){e.html5Mode(!0)}]).run(["$rootScope","$location","SessionService",function(e,o,r){r.onAuthenticated(function(){})}]);
//# sourceMappingURL=out.js.map

},{"./../adm/posts/module.js":4,"./../adm/redirects/module.js":6,"./../adm/users/module.js":8,"./../common/directives/post.js":10,"./../common/directives/tagInput.js":13,"./../common/filters/filters.js":14,"./../common/models/adminDataService.js":15,"./../common/models/postsService.js":16,"./../common/models/sessionService.js":17}],2:[function(require,module,exports){
module.exports='<article itemscope="itemscope" itemtype="http://schema.org/BlogPosting" itemprop="blogPost">\n <header class="entry-header">\n    <h2 class="entry-title" itemprop="headline">{{ post.title }}</h2>\n    <p class="entry-meta">\n      <time class="entry-time" itemprop="datePublished" datetime="{{ post.published }}">{{ post.publishedFormat }}</time>\n      <span class="entry-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">\n        <span class="entry-author-name" itemprop="name">{{ post.by.name }}</span>\n      </span>\n      <br />Updated\n      {{ post.updated | agoTime }}\n      <span ng-if="post.published">,\n      Published {{ post.published | agoTime }}</span>\n    </p>\n  </header>\n  <div class="entry-content" itemprop="text">\n    <img class="entry-author-image" itemprop="image" ng-src="{{ post.by.avatar }}?s=50" align="left" />\n    <p>{{ post.meta.description }}</p>\n  </div>\n\n  <footer class="entry-footer">\n    <ul>\n      <li><a href="/posts/edit/{{ post._id }}" target="_blank">Edit</a></li>\n      <li><a href="/posts/publish/{{ post._id }}" target="_blank">Publish</a></li>\n      <li ng-if="post.published"><a href="{{ post.url }}" target="_blank">View</a></li>\n    </ul>\n\n    <p class="entry-meta">\n      <span class="entry-categories">\n        <a ng-repeat=\'tag in post.tags\' href="#" title="View all posts in {{ tag.name }}" rel="category tag">{{ \'{\'+tag.slug+\'}\' }}</a>\n      </span>\n    </p>\n  </footer>\n</article>\n';
},{}],3:[function(require,module,exports){
module.exports='<section id="posts">\n\n  <h3>Recently updated <span><a href="/posts/all" target="_blank">All posts</a></span></h3>\n  <div class="posts recent">\n    <ap-post-list-item post="p" ng-repeat="p in recent"></ap-post-list-item>\n  </div>\n\n</section>\n';
},{}],4:[function(require,module,exports){
"use strict";angular.module("ADMPosts",["ngRoute","APSvcAdmin","APSvcPosts","APFilters"]).config(["$locationProvider","$routeProvider",function(t,e){e.when("/v1/adm/posts",{template:require("./list.html"),controller:"PostsCtrl as posts"})}]).directive("apPostListItem",["$parse",function(){return{template:require("./item.html"),link:function(t,e,o){t.post=t.$eval(o.post)}}}]).controller("PostsCtrl",["$scope","PostsService","AdmDataService",function(t,e,o){o.getPosts(function(e){t.recent=e})}]);
//# sourceMappingURL=out.js.map

},{"./item.html":2,"./list.html":3}],5:[function(require,module,exports){
module.exports='<section id="redirects">\n\n  <h3>Redirects </h3>\n\n  <div style="float:right">note a restart is necessary for the redirects to take effect</div>\n\n  <input type="text" ng-model=\'previous\' placeholder="From" />\n  <input type="text" ng-model=\'current\' placeholder="To" />\n  <button id="btnCreateRedirect" ng-click="createRedirect()" class="btn">Create</button>\n\n  <hr />\n\n  <div class="redirects">\n    <ul>\n      <li ng-repeat="r in redirects">\n        <time>{{ r._id | objectIdToDate : \'MM.DD\' }}</time>\n        <label><a href="{{ r.previous }}" target="_blank">{{ r.previous }}</a></label>\n        <span><a href="#" ng-click="deleteRedirect(r._id)">x</a>===> {{ r.current }}</span>\n      </li>\n    </ul>\n  </div>\n\n</section>\n';
},{}],6:[function(require,module,exports){
"use strict";angular.module("ADMRedirects",["ngRoute","APSvcAdmin","APFilters"]).config(["$locationProvider","$routeProvider",function(e,r){r.when("/v1/adm/redirects",{template:require("./list.html"),controller:"RedirectsCtrl as redirects"})}]).controller("RedirectsCtrl",["$scope","AdmDataService",function(e,r){r.getRedirects(function(r){e.redirects=r}),e.createRedirect=function(){var t={previous:e.previous,current:e.current};r.createRedirect(t,function(r){e.redirects.push(r)})},e.deleteRedirect=function(t){r.deleteRedirect(t,function(){var r=_.find(e.redirects,function(e){return e._id==t});e.redirects=_.without(e.redirects,r)})}}]);
//# sourceMappingURL=out.js.map

},{"./list.html":5}],7:[function(require,module,exports){
module.exports='<section id="users">\n\n  <br /><br />\n  <input type="text" ng-model="_id" placeholder="Type userId" style="width:300px" />\n  <select ng-model="role">\n    <option>admin</option>\n    <option>editor</option>\n  </select>\n  <button class="btn" ng-click="toggleRole()">Toggle role</button>\n\n\n  <h3>Admins</h3>\n  <ul class="users admin">\n    <li ng-repeat="user in admins">{{ user.name }}</li>\n  </ul>\n\n  <h3>Editors</h3>\n  <ul class="users editors">\n    <li ng-repeat="user in editors">{{ user.name }}</li>\n  </ul>\n\n</section>\n';
},{}],8:[function(require,module,exports){
"use strict";angular.module("ADMUsers",["ngRoute","APSvcAdmin","APFilters"]).config(["$locationProvider","$routeProvider",function(e,o){o.when("/v1/adm/users",{template:require("./list.html"),controller:"UsersCtrl as users"})}]).controller("UsersCtrl",["$scope","AdmDataService",function(e,o){e.role="editor",o.getUsersInRole({role:"admin"},function(o){e.admins=o}),o.getUsersInRole({role:"editor"},function(o){e.editors=o}),e.toggleRole=function(){o.toggleRole({_id:e._id,role:e.role},function(){o.getUsersInRole({role:e.role},function(o){e[e.role+"s"]=o})})}}]);
//# sourceMappingURL=out.js.map

},{"./list.html":7}],9:[function(require,module,exports){
module.exports='<div class="preview">\n  <article class="blogpost">\n    <h1 class="entry-title" itemprop="headline">{{ post.title || "Type post title ..." }}</h1>\n    <h4 id="table-of-contents" ng-if="preview.toc">Table of Contents</h4>\n    <ul id="previewToc" ng-bind-html="preview.toc | markdownHtml"></ul>\n    <figure class="author">\n      <img ng-alt="{{post.by.name}}" ng-src="{{post.by.avatar}}?s=100">\n      <figcaption>\n        {{post.by.bio}}\n      </figcaption>\n    </figure>\n    <p class="asset" ng-bind-html="preview.asset | markdownHtml" ng-if="post.title && post.by.bio"></p>\n    <hr />\n    <div id="body" ng-bind-html="preview.body | markdownHtml"></div>\n  </article>\n</div>\n\n<hr />\n';
},{}],10:[function(require,module,exports){
"use strict";angular.module("APPost",[]).directive("apPostListItem",["$parse",function(){return{restrict:"E",template:require("./postListItem.html"),link:function(t,e,i){t.post=t.$eval(i.post)}}}]).directive("apPost",function(){return{template:require("./post.html"),controller:["$scope","$timeout","PostsService",function(t,e){e(function(){pageHlpr.highlightSyntax()},100)}]}});
//# sourceMappingURL=out.js.map

},{"./post.html":9,"./postListItem.html":11}],11:[function(require,module,exports){
module.exports='<article itemscope="itemscope" itemtype="http://schema.org/BlogPosting" itemprop="blogPost">\n  <a href="{{ post.url }}" title="{{ post.title }}" target="_self" rel="bookmark">\n    <header class="entry-header">\n      <h2 class="entry-title" itemprop="headline">{{ post.title }}</h2>\n      <p class="entry-meta">\n        <time class="entry-time" itemprop="datePublished" datetime="{{ post.published }}">{{ post.publishedFormat }}</time>\n        by\n        <span class="entry-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">\n          <span class="entry-author-name" itemprop="name">{{ post.by.name }}</span>\n        </span>\n      </p>\n    </header>\n    <div class="entry-content" itemprop="text">\n      <img class="entry-author-image" itemprop="image" ng-src="{{ post.by.avatar }}?s=50" align="left" />\n      <p>{{ post.meta.description }}</p>\n    </div>\n  </a>\n  <footer class="entry-footer">\n    <p class="entry-meta">\n      <span class="entry-categories">\n        <a ng-repeat=\'tag in post.tags\' ng-href="/posts/tag/{{tag.slug}}" title="View all posts in {{ tag.name }}" rel="category tag">{{ \'{\'+tag.slug+\'}\' }}</a>\n      </span>\n    </p>\n\n    <bookmarker type="post"></bookmarker>\n  </footer>\n</article>\n';
},{}],12:[function(require,module,exports){
module.exports='<div class="form-group tag-input-group">\n  <div class="nomobile">This feature is not available on mobile</div>\n\n  <div class="drag">\n    <p>\n      <b>drag in order of importance</b>\n      <br />place most used first\n    </p>\n  </div>\n  <div class="selected">\n    <label for="tagInput">Your stack</label>\n\n    <ul class="tags" sortable sort=\'tags\' service=\'tags\'>\n      <li ng-repeat="tag in session.tags | orderBy:\'sort\'" ng-attr-data-id="{{tag._id}}">\n        {{tag.slug}}\n        <a class="remove" ng-click="deselectMatch(tag)">x</a>\n        <a class="order" href="#"></a>\n      </li>\n    </ul>\n\n    <p ng-if="!selectedTags() || selectedTags().length == 0">No tags selected yet.</p>\n  </div>\n\n  <label for="tagInput">Search technologies</label>\n  <input type="text" class="tagInput form-control"\n    placeholder="type a technology (e.g. javascript)"\n    ng-model="q"\n    typeahead="t as t for t in getTags($viewValue) | filter:$viewValue"\n    typeahead-editable="false"\n    typeahead-input-formatter="keypressSelect($model)" tabindex="100">\n  <!-- typeahead-loading="loading"\n  <i ng-show="loading" class="glyphicon glyphicon-refresh"></i>\n   -->\n</div>\n\n<script type="text/ng-template" id="template/typeahead/typeahead-match.html">\n  <div>\n    <a class="tagSelect">\n      <span bind-html-unsafe="match.model.slug | typeaheadHighlight:query"></span>\n      <p bind-html-unsafe="match.model.desc | typeaheadHighlight:query"></p>\n    </a>\n  </div>\n</script>\n';
},{}],13:[function(require,module,exports){
"use strict";angular.module("APTagInput",["ui.bootstrap"]).value("badTagsSearchQuery",function(t){var e=t&&(t.length>=2||/r/i.test(t)),a=/\[|\]|\{|\}/g.test(t),r=!e||a;return angular.element(".tag-input-group").toggleClass("has-error",r),r}).directive("tagInput",["badTagsSearchQuery",function(t){return{restrict:"EA",template:require("./tagInput.html"),controller:["$scope","$attrs","$http",function(e,a,r){e.getTags=function(a){return t(a)?[]:r.get("/v1/api/tags/search/"+a).then(function(t){var a=[];return angular.forEach(t.data,function(t){a.push(t)}),e.matches=a,a})},e.keypressSelect=function(t){return t&&0!=e.matches.length?void e.selectMatch(0):null},e.selectMatch=function(t){var a=e.matches[t];e.selectTag(a),e.q=""},e.deselectMatch=function(t){this.deselectTag(t)}}]}}]);
//# sourceMappingURL=out.js.map

},{"./tagInput.html":12}],14:[function(require,module,exports){
"use strict";var util=require("../../../shared/util.js");angular.module("APFilters",[]).filter("publishedTime",function(){return function(t,r){var n=moment().format("ZZ");if(""!=t&&null!=t){var e=t.split("GMT")[0],u="MMM Do hh:mm";r&&(u=r);var i=moment(e,"YYYY-MM-DDTHH:mm:ss:SSSZ").format(u);return i.replace(n,"")}return"-"}}).filter("locaTime",function(){return function(t,r){var n=moment().format("ZZ");if(""!=t){var e=t.split("GMT")[0];r=r||"ddd, MMM Do ha";var u=moment(e,"YYYY-MM-DDTHH:mm:ss:SSSZ").format(r);return u.replace(n,"")}return"Confirming time"}}).filter("objectIdToDate",function(){return function(t,r){return r=r||"MMM DD",moment(util.ObjectId2Date(t)).format(r)}}).filter("agoTime",function(){return function(t){return moment(t).fromNow()}}).filter("trustUrl",["$sce",function(t){return function(r){return t.trustAsResourceUrl(r)}}]).filter("markdownHtml",["$sce",function(t){return function(r){return t.trustAsHtml(r)}}]).filter("fancyTags",function(){return function(t){return t?t.join(", "):""}});
//# sourceMappingURL=out.js.map

},{"../../../shared/util.js":18}],15:[function(require,module,exports){
"use strict";var lazyErrorCb=function(r){console.log("error:",r)};angular.module("APSvcAdmin",[]).constant("APIAdm","/v1/api/adm").service("AdmDataService",["$http","APIAdm",function(r,e){this.getPosts=function(s){r.get(e+"/posts").success(s).error(lazyErrorCb)},this.getUsersInRole=function(s,t){r.get(e+"/users/role/"+s.role).success(t).error(lazyErrorCb)},this.toggleRole=function(s,t){r.put(e+"/users/"+s._id+"/role/"+s.role,s).success(t).error(lazyErrorCb)},this.getRedirects=function(s){r.get(e+"/redirects").success(s).error(lazyErrorCb)},this.createRedirect=function(s,t){r.post(e+"/redirects",s).success(t).error(lazyErrorCb)},this.deleteRedirect=function(s,t){r.delete(e+"/redirects/"+s).success(t).error(lazyErrorCb)}}]);
//# sourceMappingURL=out.js.map

},{}],16:[function(require,module,exports){
"use strict";var headings=[],lazyErrorCb=function(){};angular.module("APSvcPosts",[]).constant("API","/v1/api").factory("mdHelper",function(){return this.headingsChanged=function(s){var r=headings;headings=s.match(/\n##.*/g)||[];var t=r.length!=headings.length;if(!t)for(var e=0;e<headings.length;e++)if(r[e]!=headings[e])return!0;return t},this}).service("PostsService",["$http","API","mdHelper",function(s,r,t){this.getById=function(t,e){s.get(r+"/posts/"+t).success(e).error(lazyErrorCb)},this.getByUsername=function(t,e){s.get(r+"/posts/by/"+t).success(e).error(lazyErrorCb)},this.getMyPosts=function(t){s.get(r+"/posts/me").success(t).error(lazyErrorCb)},this.getRecentPosts=function(t){s.get(r+"/posts/recent").success(t).error(lazyErrorCb)},this.getTagsPosts=function(t,e){s.get(r+"/posts/tag/"+t).success(e).error(lazyErrorCb)},this.getToc=function(e,o){t.headingsChanged(e)&&s.post(r+"/posts-toc",{md:e}).success(o).error(lazyErrorCb)},this.create=function(t,e){s.post(r+"/posts",t).success(e).error(lazyErrorCb)},this.update=function(t,e){s.put(r+"/posts/"+t._id,t).success(e).error(lazyErrorCb)},this.publish=function(t,e){s.put(r+"/posts/publish/"+t._id,t).success(e).error(lazyErrorCb)},this.delete=function(t,e){s.delete(r+"/posts/"+t).success(e).error(lazyErrorCb)}}]);
//# sourceMappingURL=out.js.map

},{}],17:[function(require,module,exports){
"use strict";angular.module("APSvcSession",[]).constant("API","/v1/api").constant("Auth","/v1/auth").service("SessionService",["$rootScope","$http","API","Auth","$cacheFactory",function(s,e,t,n,r){var u;this.getSession=function(){return u=u||r(),e.get(t+"/session/full",{cache:u}).then(function(s){return s.data})};var o=function(e){return function(t){s.session=t,e(t)}};this.onAuthenticated=function(s){return this.getSession().then(s)},this.onUnauthenticated=function(s){return this.getSession().then(null,s)},this.flushCache=function(){u=null},this.login=function(s,t,r){e.post(n+"/login",s).success(o(t)).error(r)},this.signup=function(s,t,r){e.post(n+"/signup",s).success(o(t)).error(r)},this.changeEmail=function(s,n,r){e.put(t+"/users/me/email",s).success(o(n)).error(r)},this.verifyEmail=function(s,n,r){e.put(t+"/users/me/email-verify",s).success(o(n)).error(r)},this.updateTag=function(s,n,r){e.put(t+"/users/me/tag/"+s.slug,{}).success(o(n)).error(r)},this.updateBookmark=function(s,n,r){e.put(t+"/users/me/bookmarks/"+s.type+"/"+s.objectId,{}).success(o(n)).error(r)},this.updateProfile=function(s,n,r){e.put(t+"/users/me",s).success(o(n)).error(r)},this.requestPasswordChange=function(s,n,r){e.put(t+"/users/me/password-change",s).success(n).error(r)},this.changePassword=function(s,n,r){e.put(t+"/users/me/password",s).success(n).error(r)},this.tags=function(s,n,r){e.put(t+"/users/me/tags",s).success(n).error(r)},this.bookmarks=function(s,n,r){e.put(t+"/users/me/bookmarks",s).success(n).error(r)}}]);
//# sourceMappingURL=out.js.map

},{}],18:[function(require,module,exports){
"use strict";var botPattern=/googlebot|gurujibot|twitterbot|yandexbot|slurp|msnbot|bingbot|facebookexternalhit/i,idsEqual=function(t,e){return t.toString()==e.toString()},nestedPick=function(t,e){if(!t)return null;for(var n,r={},i=e[Symbol.iterator]();!(n=i.next()).done;){var o=n.value,u=o.split(".");if(1===u.length)"undefined"!=typeof t[o]&&null!==t[o]&&(r[o]=t[o]);else{var a=nestedPick(t[u[0]],[o.replace(u[0]+".","")]);_.isEmpty(a)||(r[u[0]]=a)}}return r};module.exports={idsEqual:idsEqual,ObjectId2Date:function(t){return new Date(1e3*parseInt(t.toString().slice(0,8),16))},toggleItemInArray:function(t,e,n){if(t){n||(n=function(t){return idsEqual(t._id,e._id)});var r=_.find(t,n);return r?_.without(t,r):(t.push(e),t)}return[e]},combineItems:function(t,e,n){if(!t&&!e)return[];if(!t||0==t.length)return e;if(!e||0==e.length)return t;for(var r,i=e[Symbol.iterator]();!(r=i.next()).done;){var o=r.value,u=_.find(t,function(t){return idsEqual(t[n],o[n])});u||t.push(o)}return t},sessionCreatedAt:function(t){return new moment(t.cookie._expires).subtract(t.cookie.originalMaxAge,"ms").toDate()},dateWithDayAccuracy:function(t){return t||(t=moment()),moment(t.format("YYYY-MM-DD"),"YYYY-MM-DD").toDate()},firstName:function(t){return t.split(" ")[0]},lastName:function(t){return t.replace(t.split(" ")[0]+"","")},selectFromObject:function(t,e){return t&&e?nestedPick(t,_.keys(e)):t},isBot:function(t){var e=t.replace(/^\s*/,"").replace(/\s*$/,"");return botPattern.test(e)}};
//# sourceMappingURL=out.js.map

},{}]},{},[1]);
