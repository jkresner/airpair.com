<!DOCTYPE html>
<html lang="en-US" prefix="og: http://ogp.me/ns#">
<head>
{{#with viewData}}{{> pageMeta }}{{/with}}
  <link rel='stylesheet' id='google-font-css'  href='//fonts.googleapis.com/css?family=Open+Sans%3A300%2C400%2C700&#038;ver=2.0.1' type='text/css' media='all' />
  <link rel="stylesheet" href="/v1/lib/bootstrap/bootstrap.css" type="text/css" />
  <link rel="stylesheet" href="/v1/lib/prism/prism.css" type="text/css" />
  <link rel='stylesheet' href='/v1/css/index.css' type='text/css' media='all' />
</head>
<body>
{{> siteHeader }}

{{#with viewData}}
<div class="main-wrap">
  <main ng-view>
    <header class="entry-header">
      <p class="entry-meta">
        <a href="/posts">Posts</a>
        &nbsp; > &nbsp;
        <span class="entry-author" itemprop="author" itemscope="itemscope" itemtype="//schema.org/Person">
        {{#if by.username}}
          <a href="/me/{{by.username}}" class="entry-author-link" itemprop="url" rel="author" target="_self"><span class="entry-author-name" itemprop="name">{{by.name}}</span></a>
        {{else}}
          <span class="entry-author-name" itemprop="name">{{by.name}}</span>
        {{/if}}
        </span>
        &nbsp; > &nbsp;
        <time class="entry-time" itemprop="datePublished" datetime="{{ isoMoment published }}">{{ dateFormat published 'DD MMM, YYYY' }}
        </time>

      </p>
    </header>
    <article class="blogpost">
      <h1 class="entry-title" itemprop="headline">{{ title }}</h1>
      <div class="share">
        <div class="pw-widget pw-counter-vertical" pw:twitter-via="airpair">
          <a class="pw-button-facebook pw-look-native"></a>
          <a class="pw-button-twitter pw-look-native"></a>
          <a class="pw-button-linkedin pw-look-native"></a>
        </div>
      </div>

      <h4 id="table-of-contents">Table of Contents</h4>
      {{{toc}}}
      <figure class="author">
        <img alt="{{by.name}}" src="{{by.avatar}}?s=100">
        <figcaption>
          {{by.bio}}
        </figcaption>
        <hr />
      </figure>
      {{#if assetUrl }}
      <p class="asset">{{ assetUrlToMedia assetUrl }}</p>
      {{/if}}
      <hr />

      {{{ html }}}

      <div id="disqus_thread"></div>

    </article>
  </main>
</div>
{{/with}}

<div ng-app="AP">
	<nav id="side" class="collapse" side-nav></nav>
	<bookmarker type="post"></bookmarker>
</div>

{{> siteScripts }}
<script type="text/javascript" src="/v1/js/lite.js"></script>
<script type="text/javascript">

  function bindTracking() {
    ga('send', 'pageview')

    $.each($('.trackPostCTA'), function(idx,el){
      $(el).click(function (e) {
        analytics.track('Click', { type: 'Post CTA', unit: 'code footer', idx: idx, text: el.innerHTML, location: window.location.pathname });

        setTimeout(function () {
          window.location.href = $(el).attr('href');
        }, 350);

        return false;
      });
    })
  }

	function loadDisqus()
	{
		window.disqus_url = '{{viewData.meta.canonical}}';
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = 'https://airpairblog.disqus.com/embed.js';
		var x = document.getElementsByTagName('script')[0];
		x.parentNode.insertBefore(dsq, x);
	}

	$(function() {
	  pageHlpr.fixPostRail();
	  pageHlpr.highlightSyntax({ addCtrs: true });
	  pageHlpr.loadPoSt();
	  loadDisqus();
	});


{{#with viewData}}
  window.viewData = { post: { _id: '{{_id}}' } }
{{/with}}

</script>
{{> initPage }}

</body>
</html>
